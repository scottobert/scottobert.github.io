<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Scott Obert</title><link rel=stylesheet href=/css/style.css><script src=/js/npm-packages.js defer></script><script defer src=https://cloud.umami.is/script.js data-website-id=e2461896-021d-422a-b83f-624a8819309b></script></head><body><header class=site-header><div class=container><div class=header-content><div class=header-left><h1><a href=/>Scott Obert</a></h1><nav><a href=/posts/>Blog</a>
<a href=/about/>About</a></nav></div><div class=social-links><a href=https://www.linkedin.com/in/scott-obert-3a7338b/ target=_blank rel="noopener noreferrer" title="LinkedIn Profile"><svg viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853.0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601.0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144.0-2.063-.926-2.063-2.065.0-1.138.92-2.063 2.063-2.063 1.14.0 2.064.925 2.064 2.063.0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225.0H1.771C.792.0.0.774.0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2.0 22.222.0h.003z"/></svg>
<span>LinkedIn</span>
</a><a href=https://github.com/scottobert target=_blank rel="noopener noreferrer" title="GitHub Profile"><svg viewBox="0 0 24 24"><path d="M12 0C5.37.0.0 5.37.0 12c0 5.3 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61-.546-1.385-1.335-1.755-1.335-1.755-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.605-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 21.795 24 17.295 24 12c0-6.63-5.37-12-12-12"/></svg>
<span>GitHub</span></a></div></div></div></header><div class=container><div class=content-layout><main class=main-content><article class=post><h1>Test-Driven Development in TypeScript: Beyond the Basics</h1><div class=post-meta><span>Aug 15, 2021</span>
<span>| Tags: TypeScript, Testing, TDD, Development, Best Practices</span></div><div class=post-content><p>Test-Driven Development (TDD) has evolved significantly with modern TypeScript tooling and frameworks. While most developers understand the basic red-green-refactor cycle, mastering TDD in TypeScript requires understanding advanced patterns, effective mocking strategies, and leveraging the type system for better test design.</p><h2 id=beyond-basic-tdd-advanced-patterns>Beyond Basic TDD: Advanced Patterns</h2><h3 id=type-driven-test-design>Type-Driven Test Design</h3><p>TypeScript&rsquo;s type system provides unique opportunities to improve test design. Instead of just testing implementation details, we can use types to guide our test structure and ensure comprehensive coverage:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// Define clear interfaces for testability
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>UserRepository</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>findById</span>(<span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>User</span> <span style=color:#960050;background-color:#1e0010>|</span> <span style=color:#a6e22e>null</span>&gt;;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>save</span>(<span style=color:#a6e22e>user</span>: <span style=color:#66d9ef>User</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>User</span>&gt;;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>delete</span>(<span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>void</span>&gt;;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>EmailService</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>sendWelcomeEmail</span>(<span style=color:#a6e22e>user</span>: <span style=color:#66d9ef>User</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>void</span>&gt;;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// The service under test
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserService</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>(
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>userRepo</span>: <span style=color:#66d9ef>UserRepository</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>emailService</span>: <span style=color:#66d9ef>EmailService</span>
</span></span><span style=display:flex><span>  ) {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>createUser</span>(<span style=color:#a6e22e>userData</span>: <span style=color:#66d9ef>CreateUserRequest</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>User</span>&gt; {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Implementation details
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This approach makes dependencies explicit and testable while the type system prevents many runtime errors during testing.</p><h3 id=property-based-testing-with-typescript>Property-Based Testing with TypeScript</h3><p>Move beyond example-based tests to property-based testing using libraries like <code>fast-check</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>fc</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;fast-check&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;UserValidator&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;should validate email format for any string input&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fc</span>.<span style=color:#a6e22e>assert</span>(
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>fc</span>.<span style=color:#a6e22e>property</span>(<span style=color:#a6e22e>fc</span>.<span style=color:#66d9ef>string</span>(), (<span style=color:#a6e22e>input</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>UserValidator</span>.<span style=color:#a6e22e>isValidEmail</span>(<span style=color:#a6e22e>input</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>result</span>) {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>input</span>).<span style=color:#a6e22e>toMatch</span>(<span style=color:#e6db74>/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;should handle edge cases in user data&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>userDataArbitrary</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>fc</span>.<span style=color:#a6e22e>record</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>fc.string</span>({ <span style=color:#a6e22e>minLength</span>: <span style=color:#66d9ef>1</span>, <span style=color:#a6e22e>maxLength</span>: <span style=color:#66d9ef>100</span> }),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>age</span>: <span style=color:#66d9ef>fc.integer</span>({ <span style=color:#a6e22e>min</span>: <span style=color:#66d9ef>0</span>, <span style=color:#a6e22e>max</span>: <span style=color:#66d9ef>150</span> }),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>email</span>: <span style=color:#66d9ef>fc.emailAddress</span>()
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fc</span>.<span style=color:#a6e22e>assert</span>(
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>fc</span>.<span style=color:#a6e22e>property</span>(<span style=color:#a6e22e>userDataArbitrary</span>, (<span style=color:#a6e22e>userData</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>UserValidator</span>.<span style=color:#a6e22e>validate</span>(<span style=color:#a6e22e>userData</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>isValid</span>).<span style=color:#a6e22e>toBe</span>(<span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h3 id=advanced-mocking-strategies>Advanced Mocking Strategies</h3><p>Effective mocking in TypeScript goes beyond simple jest.fn(). Create type-safe mocks that evolve with your interfaces:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>MockType</span>&lt;<span style=color:#f92672>T</span>&gt; <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>P</span> <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>T</span>]<span style=color:#f92672>?:</span> <span style=color:#a6e22e>jest</span>.<span style=color:#a6e22e>MockedFunction</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>P</span><span style=color:#960050;background-color:#1e0010>]</span>&gt;;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>createMockRepository</span>()<span style=color:#f92672>:</span> <span style=color:#a6e22e>MockType</span>&lt;<span style=color:#f92672>UserRepository</span>&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>findById</span>: <span style=color:#66d9ef>jest.fn</span>(),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>save</span>: <span style=color:#66d9ef>jest.fn</span>(),
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>delete</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>jest</span>.<span style=color:#a6e22e>fn</span>()
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;UserService&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>userService</span>: <span style=color:#66d9ef>UserService</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>mockUserRepo</span>: <span style=color:#66d9ef>MockType</span>&lt;<span style=color:#f92672>UserRepository</span>&gt;;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>mockEmailService</span>: <span style=color:#66d9ef>MockType</span>&lt;<span style=color:#f92672>EmailService</span>&gt;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>beforeEach</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mockUserRepo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createMockRepository</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mockEmailService</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>sendWelcomeEmail</span>: <span style=color:#66d9ef>jest.fn</span>() };
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>userService</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>UserService</span>(
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>mockUserRepo</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>UserRepository</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>mockEmailService</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>EmailService</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;should save user and send welcome email&#39;</span>, <span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>userData</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;John&#39;</span>, <span style=color:#a6e22e>email</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;john@example.com&#39;</span> };
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>savedUser</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;123&#39;</span>, ...<span style=color:#a6e22e>userData</span> };
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mockUserRepo</span>.<span style=color:#a6e22e>save</span><span style=color:#f92672>?</span>.<span style=color:#a6e22e>mockResolvedValue</span>(<span style=color:#a6e22e>savedUser</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mockEmailService</span>.<span style=color:#a6e22e>sendWelcomeEmail</span><span style=color:#f92672>?</span>.<span style=color:#a6e22e>mockResolvedValue</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>userService</span>.<span style=color:#a6e22e>createUser</span>(<span style=color:#a6e22e>userData</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>mockUserRepo</span>.<span style=color:#a6e22e>save</span>).<span style=color:#a6e22e>toHaveBeenCalledWith</span>(
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>expect</span>.<span style=color:#a6e22e>objectContaining</span>(<span style=color:#a6e22e>userData</span>)
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>mockEmailService</span>.<span style=color:#a6e22e>sendWelcomeEmail</span>).<span style=color:#a6e22e>toHaveBeenCalledWith</span>(<span style=color:#a6e22e>savedUser</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>result</span>).<span style=color:#a6e22e>toEqual</span>(<span style=color:#a6e22e>savedUser</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h2 id=testing-async-patterns>Testing Async Patterns</h2><h3 id=testing-complex-async-flows>Testing Complex Async Flows</h3><p>Modern applications involve complex async operations. Structure tests to handle these patterns effectively:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;OrderProcessingService&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;should handle concurrent order processing&#39;</span>, <span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>orders</span> <span style=color:#f92672>=</span> Array.<span style=color:#66d9ef>from</span>({ <span style=color:#a6e22e>length</span>: <span style=color:#66d9ef>5</span> }, (<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>i</span>) <span style=color:#f92672>=&gt;</span> 
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>createTestOrder</span>({ <span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`order-</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>i</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span> })
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Start all processing concurrently
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>processingPromises</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>orders</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>order</span> <span style=color:#f92672>=&gt;</span> 
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>orderService</span>.<span style=color:#a6e22e>processOrder</span>(<span style=color:#a6e22e>order</span>)
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>results</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>Promise</span>.<span style=color:#a6e22e>allSettled</span>(<span style=color:#a6e22e>processingPromises</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Verify all succeeded
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>results</span>.<span style=color:#a6e22e>forEach</span>((<span style=color:#a6e22e>result</span>, <span style=color:#a6e22e>index</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>status</span>).<span style=color:#a6e22e>toBe</span>(<span style=color:#e6db74>&#39;fulfilled&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>status</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;fulfilled&#39;</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>status</span>).<span style=color:#a6e22e>toBe</span>(<span style=color:#e6db74>&#39;PROCESSED&#39;</span>);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Verify side effects
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>mockPaymentService</span>.<span style=color:#a6e22e>charge</span>).<span style=color:#a6e22e>toHaveBeenCalledTimes</span>(<span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>mockInventoryService</span>.<span style=color:#a6e22e>reserve</span>).<span style=color:#a6e22e>toHaveBeenCalledTimes</span>(<span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h3 id=testing-error-boundaries>Testing Error Boundaries</h3><p>Design tests that verify error handling and recovery:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;Resilient Service Operations&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;should retry on transient failures&#39;</span>, <span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mockExternalService</span>.<span style=color:#a6e22e>processRequest</span>
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>mockRejectedValueOnce</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>TransientError</span>(<span style=color:#e6db74>&#39;Network timeout&#39;</span>))
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>mockRejectedValueOnce</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>TransientError</span>(<span style=color:#e6db74>&#39;Service unavailable&#39;</span>))
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>mockResolvedValue</span>({ <span style=color:#a6e22e>success</span>: <span style=color:#66d9ef>true</span> });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>resilientService</span>.<span style=color:#a6e22e>processWithRetry</span>(<span style=color:#a6e22e>testData</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>success</span>).<span style=color:#a6e22e>toBe</span>(<span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>mockExternalService</span>.<span style=color:#a6e22e>processRequest</span>).<span style=color:#a6e22e>toHaveBeenCalledTimes</span>(<span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;should fail fast on permanent errors&#39;</span>, <span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mockExternalService</span>.<span style=color:#a6e22e>processRequest</span>
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>mockRejectedValue</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>PermanentError</span>(<span style=color:#e6db74>&#39;Invalid credentials&#39;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>expect</span>(
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>resilientService</span>.<span style=color:#a6e22e>processWithRetry</span>(<span style=color:#a6e22e>testData</span>)
</span></span><span style=display:flex><span>    ).<span style=color:#a6e22e>rejects</span>.<span style=color:#a6e22e>toThrow</span>(<span style=color:#e6db74>&#39;Invalid credentials&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>mockExternalService</span>.<span style=color:#a6e22e>processRequest</span>).<span style=color:#a6e22e>toHaveBeenCalledTimes</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h2 id=integration-testing-strategies>Integration Testing Strategies</h2><h3 id=database-integration-tests>Database Integration Tests</h3><p>For TypeScript applications using ORMs, create focused integration tests:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;User Repository Integration&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>repository</span>: <span style=color:#66d9ef>UserRepository</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>testDb</span>: <span style=color:#66d9ef>TestDatabase</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>beforeAll</span>(<span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>testDb</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>TestDatabase</span>.<span style=color:#a6e22e>create</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>repository</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>TypeORMUserRepository</span>(<span style=color:#a6e22e>testDb</span>.<span style=color:#a6e22e>connection</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>afterAll</span>(<span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>testDb</span>.<span style=color:#a6e22e>cleanup</span>();
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>beforeEach</span>(<span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>testDb</span>.<span style=color:#a6e22e>clearTables</span>([<span style=color:#e6db74>&#39;users&#39;</span>]);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;should persist and retrieve user data correctly&#39;</span>, <span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>userData</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;John Doe&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>email</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;john@example.com&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>preferences</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>theme</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;dark&#39;</span>, <span style=color:#a6e22e>notifications</span>: <span style=color:#66d9ef>true</span> }
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>savedUser</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>repository</span>.<span style=color:#a6e22e>save</span>(<span style=color:#a6e22e>userData</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>savedUser</span>.<span style=color:#a6e22e>id</span>).<span style=color:#a6e22e>toBeDefined</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>retrievedUser</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>repository</span>.<span style=color:#a6e22e>findById</span>(<span style=color:#a6e22e>savedUser</span>.<span style=color:#a6e22e>id</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>retrievedUser</span>).<span style=color:#a6e22e>toMatchObject</span>(<span style=color:#a6e22e>userData</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>retrievedUser</span><span style=color:#f92672>?</span>.<span style=color:#a6e22e>preferences</span>).<span style=color:#a6e22e>toEqual</span>(<span style=color:#a6e22e>userData</span>.<span style=color:#a6e22e>preferences</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h3 id=api-integration-tests>API Integration Tests</h3><p>Test your TypeScript APIs with type-safe request/response validation:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>request</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;supertest&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>app</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../src/app&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;User API Integration&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;should create and return user with correct types&#39;</span>, <span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>userData</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Jane Doe&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>email</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;jane@example.com&#39;</span>
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>response</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>request</span>(<span style=color:#a6e22e>app</span>)
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/users&#39;</span>)
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>send</span>(<span style=color:#a6e22e>userData</span>)
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>expect</span>(<span style=color:#ae81ff>201</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Type-safe response validation
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>createdUser</span>: <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>body</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>createdUser</span>.<span style=color:#a6e22e>id</span>).<span style=color:#a6e22e>toMatch</span>(<span style=color:#e6db74>/^user-[a-z0-9]+$/</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>createdUser</span>.<span style=color:#a6e22e>name</span>).<span style=color:#a6e22e>toBe</span>(<span style=color:#a6e22e>userData</span>.<span style=color:#a6e22e>name</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>createdUser</span>.<span style=color:#a6e22e>email</span>).<span style=color:#a6e22e>toBe</span>(<span style=color:#a6e22e>userData</span>.<span style=color:#a6e22e>email</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>createdUser</span>.<span style=color:#a6e22e>createdAt</span>).<span style=color:#a6e22e>toBeDefined</span>();
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h2 id=test-organization-and-maintenance>Test Organization and Maintenance</h2><h3 id=hierarchical-test-structure>Hierarchical Test Structure</h3><p>Organize tests to reflect your domain model and make them easier to maintain:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;User Management Domain&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;User Creation&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;with valid data&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;should create user successfully&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;should send welcome email&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;should log creation event&#39;</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;with invalid data&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;should reject missing email&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;should reject invalid email format&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;should reject duplicate email&#39;</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;User Updates&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;profile updates&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;should update allowed fields&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;should preserve read-only fields&#39;</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h3 id=test-data-management>Test Data Management</h3><p>Create maintainable test data factories:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserTestDataBuilder</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>user</span>: <span style=color:#66d9ef>Partial</span>&lt;<span style=color:#f92672>User</span>&gt; <span style=color:#f92672>=</span> {};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>withName</span>(<span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>name</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>withEmail</span>(<span style=color:#a6e22e>email</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>email</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>email</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>withRole</span>(<span style=color:#a6e22e>role</span>: <span style=color:#66d9ef>UserRole</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>role</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>role</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>build</span>()<span style=color:#f92672>:</span> <span style=color:#a6e22e>User</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>this.user.id</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>generateUserId</span>(),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>this.user.name</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;Test User&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>email</span>: <span style=color:#66d9ef>this.user.email</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;test@example.com&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>role</span>: <span style=color:#66d9ef>this.user.role</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>UserRole</span>.<span style=color:#a6e22e>STANDARD</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>createdAt</span>: <span style=color:#66d9ef>new</span> Date(),
</span></span><span style=display:flex><span>      ...<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>user</span>
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Usage in tests
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>testUser</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>UserTestDataBuilder</span>()
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>withName</span>(<span style=color:#e6db74>&#39;Admin User&#39;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>withRole</span>(<span style=color:#a6e22e>UserRole</span>.<span style=color:#a6e22e>ADMIN</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>build</span>();
</span></span></code></pre></div><h2 id=performance-and-scalability-testing>Performance and Scalability Testing</h2><h3 id=testing-performance-characteristics>Testing Performance Characteristics</h3><p>Include performance assertions in your test suite:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;Performance Requirements&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;should process large datasets efficiently&#39;</span>, <span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>largeDataset</span> <span style=color:#f92672>=</span> Array.<span style=color:#66d9ef>from</span>({ <span style=color:#a6e22e>length</span>: <span style=color:#66d9ef>1000</span> }, (<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>i</span>) <span style=color:#f92672>=&gt;</span> 
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>createTestRecord</span>(<span style=color:#a6e22e>i</span>)
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>startTime</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>now</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>results</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>dataProcessor</span>.<span style=color:#a6e22e>processAll</span>(<span style=color:#a6e22e>largeDataset</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>endTime</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>now</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>endTime</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>startTime</span>).<span style=color:#a6e22e>toBeLessThan</span>(<span style=color:#ae81ff>1000</span>); <span style=color:#75715e>// 1 second max
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>results</span>).<span style=color:#a6e22e>toHaveLength</span>(<span style=color:#ae81ff>1000</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>results</span>.<span style=color:#a6e22e>every</span>(<span style=color:#a6e22e>r</span> <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>processed</span>)).<span style=color:#a6e22e>toBe</span>(<span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h2 id=conclusion>Conclusion</h2><p>Advanced TDD in TypeScript leverages the type system to create more robust, maintainable tests. By combining property-based testing, sophisticated mocking strategies, and comprehensive integration testing, you can build confidence in your codebase while maintaining development velocity.</p><p>The key is to treat your tests as first-class citizens in your codebase—they should be as well-designed, type-safe, and maintainable as your production code. This investment pays dividends in reduced debugging time, easier refactoring, and higher-quality software.</p><p>Next in this series, we&rsquo;ll explore how to automate code quality enforcement through gates and continuous integration, building on the solid testing foundation we&rsquo;ve established here.</p></div></article></main><aside class=blog-sidebar><div class=sidebar-widget><h3>Recent Posts</h3><ul class=recent-posts><li><a href=/posts/using-ai-in-software-engineering/>Harnessing AI in Software Engineering: Opportunities and Challenges</a>
<span class=post-date>May 29, 2025</span></li><li><a href=/posts/aws-serverless-cost-optimization/>Cost Optimization Strategies for AWS Serverless Applications</a>
<span class=post-date>Jun 17, 2023</span></li><li><a href=/posts/aws-sns-sqs-typescript/>Building Event-Driven Architectures with AWS SNS/SQS and TypeScript</a>
<span class=post-date>May 21, 2023</span></li><li><a href=/posts/securing-aws-lambda/>Securing AWS Lambda Functions: Best Practices and Implementation Guide</a>
<span class=post-date>Apr 7, 2023</span></li><li><a href=/posts/aws-step-functions-typescript/>Step Functions: Orchestrating AWS Lambda Workflows in TypeScript</a>
<span class=post-date>Mar 5, 2023</span></li></ul></div><div class=sidebar-widget><h3>Categories</h3><ul class=categories><li><a href=/categories/architecture>architecture (1)</a></li><li><a href=/categories/architecture-and-design>architecture and design (7)</a></li><li><a href=/categories/artificial-intelligence>artificial intelligence (1)</a></li><li><a href=/categories/cloud-computing>cloud computing (11)</a></li><li><a href=/categories/code-quality>code quality (1)</a></li><li><a href=/categories/cost-optimization>cost optimization (1)</a></li><li><a href=/categories/data-engineering>data engineering (2)</a></li><li><a href=/categories/database>database (1)</a></li><li><a href=/categories/debugging-and-troubleshooting>debugging and troubleshooting (1)</a></li><li><a href=/categories/development-tools>development tools (2)</a></li><li><a href=/categories/development-tutorials>development tutorials (1)</a></li><li><a href=/categories/microservices>microservices (1)</a></li><li><a href=/categories/performance>performance (1)</a></li><li><a href=/categories/quality-assurance>quality assurance (1)</a></li><li><a href=/categories/security>security (1)</a></li><li><a href=/categories/serverless>serverless (1)</a></li><li><a href=/categories/software-development>software development (8)</a></li><li><a href=/categories/technical-debt>technical debt (1)</a></li><li><a href=/categories/testing>testing (2)</a></li><li><a href=/categories/version-control>version control (1)</a></li></ul></div><div class=sidebar-widget><h3>Post Series</h3><ul class=recent-posts><li><a href=/posts/real-time-processing-architectures/>Cloud Architecture Patterns: Real-time Processing Architectures</a>
<span class=post-date>Apr 11, 2021</span><div class=series-meta><a href=/series/cloud-architecture-patterns/ class=series-link>View all 7 posts in series →</a></div></li><li><a href=/posts/technical-debt-management-growing-codebases/>Modern Development Practices: Technical Debt Management in Growing Codebases: Strategies for Sustainable Development</a>
<span class=post-date>Dec 19, 2021</span><div class=series-meta><a href=/series/modern-development-practices/ class=series-link>View all 7 posts in series →</a></div></li></ul></div><div class=sidebar-widget><h3>Tags</h3><div class=tag-cloud><a href=/tags/ai class=tag-cloud-item style=font-size:1rem>ai
</a><a href=/tags/api-design class=tag-cloud-item style=font-size:1rem>api design
</a><a href=/tags/architecture class=tag-cloud-item style=font-size:1rem>architecture
</a><a href=/tags/athena class=tag-cloud-item style=font-size:1rem>athena
</a><a href=/tags/automation class=tag-cloud-item style=font-size:1rem>automation
</a><a href=/tags/aws class=tag-cloud-item style=font-size:2rem>aws
</a><a href=/tags/best-practices class=tag-cloud-item style=font-size:1rem>best practices
</a><a href=/tags/chaos-engineering class=tag-cloud-item style=font-size:1rem>chaos engineering
</a><a href=/tags/ci/cd class=tag-cloud-item style=font-size:1rem>ci/cd
</a><a href=/tags/code-quality class=tag-cloud-item style=font-size:1rem>code quality
</a><a href=/tags/communication-patterns class=tag-cloud-item style=font-size:1rem>communication patterns
</a><a href=/tags/cost-optimization class=tag-cloud-item style=font-size:1rem>cost optimization
</a><a href=/tags/cqrs class=tag-cloud-item style=font-size:1rem>cqrs
</a><a href=/tags/data-architecture class=tag-cloud-item style=font-size:1rem>data architecture
</a><a href=/tags/data-lake class=tag-cloud-item style=font-size:1rem>data lake
</a><a href=/tags/data-modeling class=tag-cloud-item style=font-size:1rem>data modeling
</a><a href=/tags/database-design class=tag-cloud-item style=font-size:1rem>database design
</a><a href=/tags/debugging class=tag-cloud-item style=font-size:1rem>debugging
</a><a href=/tags/developer-tips class=tag-cloud-item style=font-size:1rem>developer tips
</a><a href=/tags/development class=tag-cloud-item style=font-size:2rem>development
</a><a href=/tags/distributed-systems class=tag-cloud-item style=font-size:1rem>distributed systems
</a><a href=/tags/dynamodb class=tag-cloud-item style=font-size:1rem>dynamodb
</a><a href=/tags/enterprise-architecture class=tag-cloud-item style=font-size:1rem>enterprise architecture
</a><a href=/tags/event-sourcing class=tag-cloud-item style=font-size:1rem>event sourcing
</a><a href=/tags/event-driven-architecture class=tag-cloud-item style=font-size:1rem>event-driven architecture
</a><a href=/tags/eventbridge class=tag-cloud-item style=font-size:1rem>eventbridge
</a><a href=/tags/fault-tolerance class=tag-cloud-item style=font-size:1rem>fault tolerance
</a><a href=/tags/glue class=tag-cloud-item style=font-size:1rem>glue
</a><a href=/tags/graphql class=tag-cloud-item style=font-size:1rem>graphql
</a><a href=/tags/kinesis class=tag-cloud-item style=font-size:1rem>kinesis
</a><a href=/tags/lambda class=tag-cloud-item style=font-size:1rem>lambda
</a><a href=/tags/load-testing class=tag-cloud-item style=font-size:1rem>load testing
</a><a href=/tags/metrics class=tag-cloud-item style=font-size:1rem>metrics
</a><a href=/tags/microservices class=tag-cloud-item style=font-size:1rem>microservices
</a><a href=/tags/monitoring class=tag-cloud-item style=font-size:1rem>monitoring
</a><a href=/tags/multi-account class=tag-cloud-item style=font-size:1rem>multi-account
</a><a href=/tags/nosql class=tag-cloud-item style=font-size:1rem>nosql
</a><a href=/tags/patterns class=tag-cloud-item style=font-size:1rem>patterns
</a><a href=/tags/performance-testing class=tag-cloud-item style=font-size:1rem>performance testing
</a><a href=/tags/productivity class=tag-cloud-item style=font-size:1rem>productivity
</a><a href=/tags/real-time class=tag-cloud-item style=font-size:1rem>real-time
</a><a href=/tags/refactoring class=tag-cloud-item style=font-size:1rem>refactoring
</a><a href=/tags/reliability class=tag-cloud-item style=font-size:1rem>reliability
</a><a href=/tags/resilience class=tag-cloud-item style=font-size:1rem>resilience
</a><a href=/tags/rest class=tag-cloud-item style=font-size:1rem>rest
</a><a href=/tags/s3 class=tag-cloud-item style=font-size:1rem>s3
</a><a href=/tags/security class=tag-cloud-item style=font-size:1rem>security
</a><a href=/tags/serverless class=tag-cloud-item style=font-size:1rem>serverless
</a><a href=/tags/software-engineering class=tag-cloud-item style=font-size:1rem>software engineering
</a><a href=/tags/standards class=tag-cloud-item style=font-size:1rem>standards
</a><a href=/tags/stream-processing class=tag-cloud-item style=font-size:1rem>stream processing
</a><a href=/tags/tdd class=tag-cloud-item style=font-size:1rem>tdd
</a><a href=/tags/technical-debt class=tag-cloud-item style=font-size:1rem>technical debt
</a><a href=/tags/testing class=tag-cloud-item style=font-size:1rem>testing
</a><a href=/tags/typescript class=tag-cloud-item style=font-size:2rem>typescript</a></div></div><div class=sidebar-widget><h3>Subscribe</h3><div class=subscribe-links><a href=/index.xml class=rss-link><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg>
RSS Feed</a></div></div><div class=sidebar-widget><h3>Archives</h3><ul class=archive-list></ul></div><div class="sidebar-widget npm-packages"><h3>My NPM Packages</h3><div id=npm-list></div></div></aside></div></div><footer class=site-footer><div class=container><p>&copy; 2025 Scott Obert</p></div></footer></body></html>
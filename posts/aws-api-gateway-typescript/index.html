<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Scott Obert</title><meta name=description content="Building robust APIs requires more than just handling HTTP requests—it demands type safety, proper validation, and clear documentation. In this post, …"><link rel=canonical href=https://scottobert.com/posts/aws-api-gateway-typescript/><meta property="og:title" content="Building Type-Safe APIs with AWS API Gateway and TypeScript"><meta property="og:description" content="Building robust APIs requires more than just handling HTTP requests—it demands type safety, proper validation, and clear documentation. In this post, …"><meta property="og:type" content="article"><meta property="og:url" content="https://scottobert.com/posts/aws-api-gateway-typescript/"><meta property="og:site_name" content="Scott Obert"><meta name=twitter:card content="summary"><meta name=twitter:title content="Building Type-Safe APIs with AWS API Gateway and TypeScript"><meta name=twitter:description content="Building robust APIs requires more than just handling HTTP requests—it demands type safety, proper validation, and clear documentation. In this post, …"><link rel=stylesheet href=/css/style.css><script src=/js/npm-packages.js defer></script><script src=/js/search.js defer></script><script defer src=https://cloud.umami.is/script.js data-website-id=e2461896-021d-422a-b83f-624a8819309b></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest></head><body><header class=site-header><div class=container><div class=header-content><div class=header-left><h1><a href=/>Scott Obert</a></h1><nav><a href=/posts/>Blog</a>
<a href=/album/>Photo Album</a>
<button type=button class=search-toggle id=search-toggle-btn aria-label="Open search" title=Search>
<svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61.0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
<span>Search</span></button></nav></div><div class=social-links><a href=https://www.linkedin.com/in/scott-obert-3a7338b/ target=_blank rel="noopener noreferrer" title="LinkedIn Profile"><svg viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853.0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601.0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144.0-2.063-.926-2.063-2.065.0-1.138.92-2.063 2.063-2.063 1.14.0 2.064.925 2.064 2.063.0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225.0H1.771C.792.0.0.774.0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2.0 22.222.0h.003z"/></svg>
<span>LinkedIn</span>
</a><a href=https://github.com/scottobert target=_blank rel="noopener noreferrer" title="GitHub Profile"><svg viewBox="0 0 24 24"><path d="M12 0C5.37.0.0 5.37.0 12c0 5.3 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61-.546-1.385-1.335-1.755-1.335-1.755-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.605-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 21.795 24 17.295 24 12c0-6.63-5.37-12-12-12"/></svg>
<span>GitHub</span></a></div></div></div></header><div class=container><nav class=breadcrumbs aria-label="Breadcrumb navigation"><ol class=breadcrumb-list><li class=breadcrumb-item><a href=https://scottobert.com/ title=Home><svg class="breadcrumb-home-icon" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
<span>Home</span></a></li><li class=breadcrumb-item><span class=breadcrumb-separator aria-hidden=true>/</span>
<a href=https://scottobert.com/posts/ title=Posts>Posts</a></li><li class=breadcrumb-item><span class=breadcrumb-separator aria-hidden=true>/</span>
<a href=https://scottobert.com/series/aws-and-typescript/ title="Series: AWS and Typescript"><svg class="breadcrumb-series-icon" viewBox="0 0 24 24"><path d="M9 4v1.38c-.83-.33-1.72-.5-2.61-.5-1.79.0-3.58.68-4.95 2.05l3.33 3.33h1.11v1.11c.86.86 1.98 1.31 3.11 1.31 1.13.0 2.25-.45 3.11-1.31V9.26h1.11l3.33-3.33c-1.37-1.37-3.16-2.05-4.95-2.05-.89.0-1.78.17-2.61.5V4H9z"/></svg>
<span>AWS and Typescript</span></a></li><li class=breadcrumb-item><span class=breadcrumb-separator aria-hidden=true>/</span>
<a href=https://scottobert.com/categories/cloud-computing title="Category: Cloud Computing"><svg class="breadcrumb-category-icon" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
<span>Cloud Computing</span></a></li><li class="breadcrumb-item breadcrumb-current"><span class=breadcrumb-separator aria-hidden=true>/</span>
<span class=breadcrumb-current-page aria-current=page>Building Type-Safe APIs with AWS API Gateway and TypeScript</span></li></ol></nav><div class=content-layout><main class=main-content><article class=post><h1>Building Type-Safe APIs with AWS API Gateway and TypeScript</h1><div class=post-meta><div class=post-meta-left><span>Jun 11, 2023</span>
<span>| Tags: AWS, TypeScript, API Gateway, Serverless, Development, REST API</span></div><div class=post-meta-right><div class=quick-social-share><button type=button class=quick-share-toggle id=quick-share-toggle title="Share this post">
<svg viewBox="0 0 24 24"><path d="M18 16.08c-.76.0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66.0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66.0-3 1.34-3 3s1.34 3 3 3c.79.0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65.0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"/></svg>
<span>Share</span></button><div class=quick-share-buttons id=quick-share-buttons><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F&text=Building+Type-Safe+APIs+with+AWS+API+Gateway+and+TypeScript" target=_blank rel="noopener noreferrer" class="quick-share-button twitter" title="Share on Twitter"><svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
</a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F" target=_blank rel="noopener noreferrer" class="quick-share-button linkedin" title="Share on LinkedIn"><svg viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853.0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601.0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144.0-2.063-.926-2.063-2.065.0-1.138.92-2.063 2.063-2.063 1.14.0 2.064.925 2.064 2.063.0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225.0H1.771C.792.0.0.774.0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2.0 22.222.0h.003z"/></svg>
</a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F" target=_blank rel="noopener noreferrer" class="quick-share-button facebook" title="Share on Facebook"><svg viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312.0 2.686.235 2.686.235v2.953H15.83c-1.491.0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
</a><a href="https://reddit.com/submit?url=https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F&title=Building+Type-Safe+APIs+with+AWS+API+Gateway+and+TypeScript" target=_blank rel="noopener noreferrer" class="quick-share-button reddit" title="Share on Reddit"><svg viewBox="0 0 24 24"><path d="M12 0A12 12 0 000 12a12 12 0 0012 12 12 12 0 0012-12A12 12 0 0012 0zm5.01 4.744c.688.0 1.25.561 1.25 1.249a1.25 1.25.0 01-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968.0 1.754.786 1.754 1.754.0.716-.435 1.333-1.01 1.614a3.111 3.111.0 01.042.52c0 2.694-3.13 4.87-7.004 4.87s-7.004-2.176-7.004-4.87c0-.183.015-.366.043-.534A1.748 1.748.0 014.028 12c0-.968.786-1.754 1.754-1.754.463.0.898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342.0 01.14-.197.35.35.0 01.238-.042l2.906.617a1.214 1.214.0 011.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687.0 1.248-.561 1.248-1.249S9.937 12 9.249 12zm5.5.0c-.687.0-1.248.561-1.248 1.25.0.687.561 1.248 1.249 1.248S16 13.937 16 13.249c0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327.0 00-.231.094.33.33.0 000 .463c.842.842 2.484.913 2.961.913s2.105-.056 2.961-.913a.361.361.0 00.029-.463.33.33.0 00-.464.0c-.547.533-1.684.73-2.512.73-.828.0-1.979-.196-2.512-.73a.326.326.0 00-.232-.095z"/></svg>
</a><a href="https://news.ycombinator.com/submitlink?u=https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F&t=Building+Type-Safe+APIs+with+AWS+API+Gateway+and+TypeScript" target=_blank rel="noopener noreferrer" class="quick-share-button hackernews" title="Share on Hacker News"><svg viewBox="0 0 24 24"><path d="M0 24V0h24v24H0zM6.951 5.896l4.112 7.708v5.064h1.583v-4.972l4.148-7.799h-1.749l-2.457 4.875c-.372.745-.688 1.434-.688 1.434s-.297-.708-.651-1.434L8.831 5.896h-1.88z"/></svg>
</a><a href="https://wa.me/?text=Building+Type-Safe+APIs+with+AWS+API+Gateway+and+TypeScript+https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F" target=_blank rel="noopener noreferrer" class="quick-share-button whatsapp" title="Share on WhatsApp"><svg viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198.0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479.0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87.0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86.0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64.0 5.122 1.03 6.988 2.898a9.825 9.825.0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815.0 0012.05.0C5.495.0.16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882.0 005.683 1.448h.005c6.554.0 11.89-5.335 11.893-11.893A11.821 11.821.0 0020.465 3.488"/></svg>
</a><a href="mailto:?subject=Building+Type-Safe+APIs+with+AWS+API+Gateway+and+TypeScript&body=Check+out+this+article%3A+Building+Type-Safe+APIs+with+AWS+API+Gateway+and+TypeScript+-+https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F" class="quick-share-button email" title="Share via Email"><svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1.0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1.0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"/></svg>
</a><button type=button class="quick-share-button copy-link" data-url=https://scottobert.com/posts/aws-api-gateway-typescript/ title="Copy link to clipboard">
<svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1.0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1.0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1.0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg></button></div></div><script>(function(){const i=document.querySelector(".quick-social-share"),e=document.getElementById("quick-share-toggle"),t=document.getElementById("quick-share-buttons");if(!i||!e||!t)return;let n=!1;e.addEventListener("click",function(){n=!n,n?(t.classList.add("visible"),e.classList.add("active")):(t.classList.remove("visible"),e.classList.remove("active"))});const a=document.querySelectorAll(".quick-share-button.copy-link");a.forEach(e=>{e.addEventListener("click",function(){const e=this.getAttribute("data-url");navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(e).then(()=>{o(this)}).catch(()=>{s(e,this)}):s(e,this)})});function s(e,t){const n=document.createElement("textarea");n.value=e,n.style.position="fixed",n.style.left="-999999px",n.style.top="-999999px",document.body.appendChild(n),n.focus(),n.select();try{document.execCommand("copy"),o(t)}catch(e){console.error("Fallback: Unable to copy",e),r(t)}document.body.removeChild(n)}function o(e){const n=e.getAttribute("title");e.setAttribute("title","Copied!"),e.classList.add("copied");const t=document.createElement("div");t.textContent="Copied!",t.style.position="absolute",t.style.bottom="100%",t.style.left="50%",t.style.transform="translateX(-50%)",t.style.background="#28a745",t.style.color="white",t.style.padding="4px 8px",t.style.borderRadius="4px",t.style.fontSize="0.75rem",t.style.whiteSpace="nowrap",t.style.zIndex="1000",t.style.marginBottom="5px",e.style.position="relative",e.appendChild(t),setTimeout(()=>{e.setAttribute("title",n),e.classList.remove("copied"),t.parentNode&&e.removeChild(t)},2e3)}function r(e){const t=e.getAttribute("title");e.setAttribute("title","Copy failed"),e.classList.add("error"),setTimeout(()=>{e.setAttribute("title",t),e.classList.remove("error")},2e3)}})()</script></div></div><div class=post-content><p>Building robust APIs requires more than just handling HTTP requests—it demands type safety, proper validation, and clear documentation. In this post, we&rsquo;ll explore how to build production-ready APIs using AWS API Gateway with TypeScript, ensuring type safety from request to response while maintaining excellent developer experience.</p><div class=plantuml-container><img id=plantuml-api-gateway-architecture class=plantuml-diagram>
<a id=plantuml-link-api-gateway-architecture href=# target=_blank class=plantuml-link title="Open diagram in new window"><span class=plantuml-link-icon>🔍</span></a></div><script src=/js/rawdeflate.js></script><script>function encode64(e){r="";for(i=0;i<e.length;i+=3)i+2==e.length?r+=append3bytes(e.charCodeAt(i),e.charCodeAt(i+1),0):i+1==e.length?r+=append3bytes(e.charCodeAt(i),0,0):r+=append3bytes(e.charCodeAt(i),e.charCodeAt(i+1),e.charCodeAt(i+2));return r}function append3bytes(e,t,n){return c1=e>>2,c2=(e&3)<<4|t>>4,c3=(t&15)<<2|n>>6,c4=n&63,r="",r+=encode6bit(c1&63),r+=encode6bit(c2&63),r+=encode6bit(c3&63),r+=encode6bit(c4&63),r}function encode6bit(e){return e<10?String.fromCharCode(48+e):(e-=10,e<26?String.fromCharCode(65+e):(e-=26,e<26?String.fromCharCode(97+e):(e-=26,e==0?"-":e==1?"_":"?")))}var deflater=window.SharedWorker&&new SharedWorker("/js/rawdeflate.js");deflater?(deflater.port.addEventListener("message",done_deflating,!1),deflater.port.start()):window.Worker&&(deflater=new Worker("/js/rawdeflate.js"),deflater.onmessage=done_deflating);function done_deflating(e){const s=document.getElementById("plantuml-api-gateway-architecture"),t="https://www.plantuml.com/plantuml/img/"+encode64(e.data);s.src=t;const n=document.getElementById("plantuml-link-api-gateway-architecture");n&&(n.href=t)}function compress(e){e=unescape(encodeURIComponent(e)),deflater?deflater.port&&deflater.port.postMessage?deflater.port.postMessage(e):deflater.postMessage(e):setTimeout(function(){done_deflating({data:deflate(e)})},100)}compress(`
@startuml API Gateway Architecture
!define RECTANGLE class

cloud "Client Applications" as clients
package "AWS Cloud" {
  rectangle "API Gateway" as apigw {
    rectangle "REST API" as restapi
    rectangle "Request Validation" as validation
    rectangle "CORS" as cors
  }
  
  package "Lambda Functions" {
    rectangle "Create User" as create
    rectangle "Get User" as get
    rectangle "Update User" as update
    rectangle "Delete User" as delete
  }
  
  database "DynamoDB" as dynamo {
    rectangle "Users Table" as table
  }
}

clients --> restapi : HTTPS Requests
restapi --> validation : Validate Schema
validation --> cors : Apply CORS
cors --> create : POST /users
cors --> get : GET /users/{id}
cors --> update : PUT /users/{id}
cors --> delete : DELETE /users/{id}

create --> table : Store User
get --> table : Retrieve User
update --> table : Update User
delete --> table : Remove User

note right of validation
  • Request validation
  • Type checking
  • Schema enforcement
end note

note right of table
  • Primary Key: id
  • Attributes: name, email,
    department, timestamps
end note
@enduml
`)</script><h2 id=why-type-safe-apis-matter>Why Type-Safe APIs Matter</h2><p>Type safety in API development provides several critical advantages:</p><ul><li><strong>Compile-time Error Detection</strong>: Catch issues before deployment rather than in production</li><li><strong>Enhanced Developer Experience</strong>: IntelliSense, autocomplete, and refactoring support</li><li><strong>Self-Documenting Code</strong>: Types serve as living documentation that stays current</li><li><strong>Team Collaboration</strong>: Clear contracts between frontend and backend developers</li><li><strong>Reduced Integration Issues</strong>: Consistent interfaces prevent miscommunication</li></ul><h2 id=project-structure-overview>Project Structure Overview</h2><div class=plantuml-container><img id=plantuml-project-structure class=plantuml-diagram>
<a id=plantuml-link-project-structure href=# target=_blank class=plantuml-link title="Open diagram in new window"><span class=plantuml-link-icon>🔍</span></a></div><script src=/js/rawdeflate.js></script><script>function encode64(e){r="";for(i=0;i<e.length;i+=3)i+2==e.length?r+=append3bytes(e.charCodeAt(i),e.charCodeAt(i+1),0):i+1==e.length?r+=append3bytes(e.charCodeAt(i),0,0):r+=append3bytes(e.charCodeAt(i),e.charCodeAt(i+1),e.charCodeAt(i+2));return r}function append3bytes(e,t,n){return c1=e>>2,c2=(e&3)<<4|t>>4,c3=(t&15)<<2|n>>6,c4=n&63,r="",r+=encode6bit(c1&63),r+=encode6bit(c2&63),r+=encode6bit(c3&63),r+=encode6bit(c4&63),r}function encode6bit(e){return e<10?String.fromCharCode(48+e):(e-=10,e<26?String.fromCharCode(65+e):(e-=26,e<26?String.fromCharCode(97+e):(e-=26,e==0?"-":e==1?"_":"?")))}var deflater=window.SharedWorker&&new SharedWorker("/js/rawdeflate.js");deflater?(deflater.port.addEventListener("message",done_deflating,!1),deflater.port.start()):window.Worker&&(deflater=new Worker("/js/rawdeflate.js"),deflater.onmessage=done_deflating);function done_deflating(e){const s=document.getElementById("plantuml-project-structure"),t="https://www.plantuml.com/plantuml/img/"+encode64(e.data);s.src=t;const n=document.getElementById("plantuml-link-project-structure");n&&(n.href=t)}function compress(e){e=unescape(encodeURIComponent(e)),deflater?deflater.port&&deflater.port.postMessage?deflater.port.postMessage(e):deflater.postMessage(e):setTimeout(function(){done_deflating({data:deflate(e)})},100)}compress(`
@startuml Project Structure
!define FOLDER folder
!define FILE rectangle

FOLDER "src/" {
  FOLDER "types/" {
    FILE "api.ts" as types
  }
  FOLDER "handlers/" {
    FILE "users.ts" as handlers
  }
  FOLDER "utils/" {
    FILE "validation.ts" as validation
    FILE "response.ts" as response
  }
}

FOLDER "tests/" {
  FILE "api.test.ts" as tests
}

FILE "template.yaml" as sam
FILE "package.json" as pkg
FILE "tsconfig.json" as ts

note right of types
  Interface definitions
  Request/Response types
  API contracts
end note

note right of handlers
  Lambda function implementations
  Business logic
  Error handling
end note

note right of validation
  Type guards
  Schema validation
  Input sanitization
end note
@enduml
`)</script><h2 id=prerequisites>Prerequisites</h2><p>Ensure you have these essentials:</p><ul><li><strong>AWS SDK v3</strong> packages for API Gateway and DynamoDB</li><li><strong>TypeScript</strong> environment with strict type checking</li><li><strong>AWS SAM CLI</strong> for local development and deployment</li><li><strong>Jest</strong> for testing framework</li></ul><h2 id=type-definitions-and-contracts>Type Definitions and Contracts</h2><p>Start with clear, comprehensive type definitions that serve as your API contract:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// src/types/api.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>CreateUserRequest</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>email</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>department?</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>UserResponse</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>email</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>department?</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createdAt</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updatedAt</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>UpdateUserRequest</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name?</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>email?</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>department?</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>ApiResponse</span>&lt;<span style=color:#f92672>T</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#a6e22e>any</span>&gt; {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>statusCode</span>: <span style=color:#66d9ef>number</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>headers</span>: <span style=color:#66d9ef>Record</span>&lt;<span style=color:#f92672>string</span>, <span style=color:#a6e22e>string</span>&gt;;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>body</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>ErrorResponse</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>error</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>message</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>statusCode</span>: <span style=color:#66d9ef>number</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>These interfaces establish clear contracts for your API endpoints, ensuring consistency across your application and providing excellent TypeScript support.</p><h2 id=request-validation-with-type-guards>Request Validation with Type Guards</h2><p>Implement robust validation using TypeScript type guards for runtime type safety:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// src/utils/validation.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>CreateUserRequest</span>, <span style=color:#a6e22e>UpdateUserRequest</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../types/api&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>EMAIL_REGEX</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>validateCreateUser</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>body</span>: <span style=color:#66d9ef>unknown</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>body</span> <span style=color:#66d9ef>is</span> <span style=color:#a6e22e>CreateUserRequest</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>body</span> <span style=color:#f92672>||</span> <span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>body</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#39;object&#39;</span>) <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>req</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>body</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>Record</span>&lt;<span style=color:#f92672>string</span>, <span style=color:#a6e22e>unknown</span>&gt;;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#f92672>!!</span>(
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;string&#39;</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>name</span>.<span style=color:#a6e22e>trim</span>() <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>email</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>email</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;string&#39;</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>EMAIL_REGEX</span>.<span style=color:#a6e22e>test</span>(<span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>email</span>) <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>department</span> <span style=color:#f92672>===</span> <span style=color:#66d9ef>undefined</span> <span style=color:#f92672>||</span> <span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>department</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;string&#39;</span>)
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>validateUpdateUser</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>body</span>: <span style=color:#66d9ef>unknown</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>body</span> <span style=color:#66d9ef>is</span> <span style=color:#a6e22e>UpdateUserRequest</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>body</span> <span style=color:#f92672>||</span> <span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>body</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#39;object&#39;</span>) <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>req</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>body</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>Record</span>&lt;<span style=color:#f92672>string</span>, <span style=color:#a6e22e>unknown</span>&gt;;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>hasValidName</span> <span style=color:#f92672>=</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>||</span> (<span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;string&#39;</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>name</span>.<span style=color:#a6e22e>trim</span>());
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>hasValidEmail</span> <span style=color:#f92672>=</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>email</span> <span style=color:#f92672>||</span> (<span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>email</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;string&#39;</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>EMAIL_REGEX</span>.<span style=color:#a6e22e>test</span>(<span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>email</span>));
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>hasValidDept</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>department</span> <span style=color:#f92672>===</span> <span style=color:#66d9ef>undefined</span> <span style=color:#f92672>||</span> <span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>department</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;string&#39;</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>hasValidName</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>hasValidEmail</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>hasValidDept</span> <span style=color:#f92672>&amp;&amp;</span> 
</span></span><span style=display:flex><span>         (<span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>!==</span> <span style=color:#66d9ef>undefined</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>email</span> <span style=color:#f92672>!==</span> <span style=color:#66d9ef>undefined</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>department</span> <span style=color:#f92672>!==</span> <span style=color:#66d9ef>undefined</span>);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ValidationError</span> <span style=color:#66d9ef>extends</span> Error {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>(<span style=color:#a6e22e>message</span>: <span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>field?</span>: <span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>super</span>(<span style=color:#a6e22e>message</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;ValidationError&#39;</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=response-utilities>Response Utilities</h2><p>Create consistent response formatting:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// src/utils/response.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ApiResponse</span>, <span style=color:#a6e22e>ErrorResponse</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../types/api&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>CORS_HEADERS</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;Content-Type&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;application/json&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;Access-Control-Allow-Origin&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;*&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;Access-Control-Allow-Methods&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;GET, POST, PUT, DELETE, OPTIONS&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;Access-Control-Allow-Headers&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Content-Type, Authorization&#39;</span>
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>const</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>createResponse</span> <span style=color:#f92672>=</span> &lt;<span style=color:#f92672>T</span>&gt;(<span style=color:#a6e22e>statusCode</span>: <span style=color:#66d9ef>number</span>, <span style=color:#a6e22e>body</span>: <span style=color:#66d9ef>T</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>ApiResponse</span>&lt;<span style=color:#f92672>T</span>&gt; <span style=color:#f92672>=&gt;</span> ({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>statusCode</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>headers</span>: <span style=color:#66d9ef>CORS_HEADERS</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>body</span>: <span style=color:#66d9ef>JSON.stringify</span>(<span style=color:#a6e22e>body</span>)
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>createErrorResponse</span> <span style=color:#f92672>=</span> (
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>statusCode</span>: <span style=color:#66d9ef>number</span>, 
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>error</span>: <span style=color:#66d9ef>string</span>, 
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>message</span>: <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>ApiResponse</span>&lt;<span style=color:#f92672>ErrorResponse</span>&gt; <span style=color:#f92672>=&gt;</span> 
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createResponse</span>(<span style=color:#a6e22e>statusCode</span>, { <span style=color:#a6e22e>error</span>, <span style=color:#a6e22e>message</span>, <span style=color:#a6e22e>statusCode</span> });
</span></span></code></pre></div><h2 id=lambda-handler-implementation>Lambda Handler Implementation</h2><p>Build type-safe Lambda functions with comprehensive error handling:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// src/handlers/users.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>APIGatewayProxyEvent</span>, <span style=color:#a6e22e>APIGatewayProxyResult</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;aws-lambda&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>DynamoDBClient</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@aws-sdk/client-dynamodb&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>DynamoDBDocumentClient</span>, <span style=color:#a6e22e>PutCommand</span>, <span style=color:#a6e22e>GetCommand</span>, <span style=color:#a6e22e>UpdateCommand</span>, <span style=color:#a6e22e>DeleteCommand</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@aws-sdk/lib-dynamodb&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>v4</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>uuidv4</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;uuid&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>UserResponse</span>, <span style=color:#a6e22e>CreateUserRequest</span>, <span style=color:#a6e22e>UpdateUserRequest</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../types/api&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>validateCreateUser</span>, <span style=color:#a6e22e>validateUpdateUser</span>, <span style=color:#a6e22e>ValidationError</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../utils/validation&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createResponse</span>, <span style=color:#a6e22e>createErrorResponse</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../utils/response&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>docClient</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>DynamoDBDocumentClient</span>.<span style=color:#66d9ef>from</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>DynamoDBClient</span>({}));
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>TABLE_NAME</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>USERS_TABLE_NAME</span><span style=color:#f92672>!</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>createUser</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>event</span>: <span style=color:#66d9ef>APIGatewayProxyEvent</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>APIGatewayProxyResult</span>&gt; <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>body</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createErrorResponse</span>(<span style=color:#ae81ff>400</span>, <span style=color:#e6db74>&#39;Bad Request&#39;</span>, <span style=color:#e6db74>&#39;Request body required&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>body</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>body</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>validateCreateUser</span>(<span style=color:#a6e22e>body</span>)) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createErrorResponse</span>(<span style=color:#ae81ff>400</span>, <span style=color:#e6db74>&#39;Validation Error&#39;</span>, <span style=color:#e6db74>&#39;Invalid request format&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>userId</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>uuidv4</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>timestamp</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Date().<span style=color:#a6e22e>toISOString</span>();
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>user</span>: <span style=color:#66d9ef>UserResponse</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>userId</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>body.name.trim</span>(),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>email</span>: <span style=color:#66d9ef>body.email.toLowerCase</span>(),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>department</span>: <span style=color:#66d9ef>body.department?.trim</span>(),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>createdAt</span>: <span style=color:#66d9ef>timestamp</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>updatedAt</span>: <span style=color:#66d9ef>timestamp</span>
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>docClient</span>.<span style=color:#a6e22e>send</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>PutCommand</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>TableName</span>: <span style=color:#66d9ef>TABLE_NAME</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>Item</span>: <span style=color:#66d9ef>user</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>ConditionExpression</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;attribute_not_exists(id)&#39;</span>
</span></span><span style=display:flex><span>    }));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createResponse</span>(<span style=color:#ae81ff>201</span>, <span style=color:#a6e22e>user</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>error</span> <span style=color:#66d9ef>instanceof</span> <span style=color:#a6e22e>ValidationError</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createErrorResponse</span>(<span style=color:#ae81ff>400</span>, <span style=color:#e6db74>&#39;Validation Error&#39;</span>, <span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>message</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;ConditionalCheckFailedException&#39;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createErrorResponse</span>(<span style=color:#ae81ff>409</span>, <span style=color:#e6db74>&#39;Conflict&#39;</span>, <span style=color:#e6db74>&#39;User already exists&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>&#39;Create user error:&#39;</span>, <span style=color:#a6e22e>error</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createErrorResponse</span>(<span style=color:#ae81ff>500</span>, <span style=color:#e6db74>&#39;Internal Server Error&#39;</span>, <span style=color:#e6db74>&#39;Failed to create user&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>getUser</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>event</span>: <span style=color:#66d9ef>APIGatewayProxyEvent</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>APIGatewayProxyResult</span>&gt; <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>userId</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>pathParameters</span><span style=color:#f92672>?</span>.<span style=color:#a6e22e>id</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>userId</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createErrorResponse</span>(<span style=color:#ae81ff>400</span>, <span style=color:#e6db74>&#39;Bad Request&#39;</span>, <span style=color:#e6db74>&#39;User ID required&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>Item</span> } <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>docClient</span>.<span style=color:#a6e22e>send</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>GetCommand</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>TableName</span>: <span style=color:#66d9ef>TABLE_NAME</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>Key</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>userId</span> }
</span></span><span style=display:flex><span>    }));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>Item</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createErrorResponse</span>(<span style=color:#ae81ff>404</span>, <span style=color:#e6db74>&#39;Not Found&#39;</span>, <span style=color:#e6db74>&#39;User not found&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createResponse</span>(<span style=color:#ae81ff>200</span>, <span style=color:#a6e22e>Item</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>UserResponse</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>&#39;Get user error:&#39;</span>, <span style=color:#a6e22e>error</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createErrorResponse</span>(<span style=color:#ae81ff>500</span>, <span style=color:#e6db74>&#39;Internal Server Error&#39;</span>, <span style=color:#e6db74>&#39;Failed to retrieve user&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>updateUser</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>event</span>: <span style=color:#66d9ef>APIGatewayProxyEvent</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>APIGatewayProxyResult</span>&gt; <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>userId</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>pathParameters</span><span style=color:#f92672>?</span>.<span style=color:#a6e22e>id</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>userId</span> <span style=color:#f92672>||</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>body</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createErrorResponse</span>(<span style=color:#ae81ff>400</span>, <span style=color:#e6db74>&#39;Bad Request&#39;</span>, <span style=color:#e6db74>&#39;User ID and body required&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>body</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>body</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>validateUpdateUser</span>(<span style=color:#a6e22e>body</span>)) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createErrorResponse</span>(<span style=color:#ae81ff>400</span>, <span style=color:#e6db74>&#39;Validation Error&#39;</span>, <span style=color:#e6db74>&#39;Invalid update format&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>updateExpression</span>: <span style=color:#66d9ef>string</span>[] <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>attributeNames</span>: <span style=color:#66d9ef>Record</span>&lt;<span style=color:#f92672>string</span>, <span style=color:#a6e22e>string</span>&gt; <span style=color:#f92672>=</span> {};
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>attributeValues</span>: <span style=color:#66d9ef>Record</span>&lt;<span style=color:#f92672>string</span>, <span style=color:#a6e22e>any</span>&gt; <span style=color:#f92672>=</span> {};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>name</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>updateExpression</span>.<span style=color:#a6e22e>push</span>(<span style=color:#e6db74>&#39;#name = :name&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>attributeNames</span>[<span style=color:#e6db74>&#39;#name&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;name&#39;</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>attributeValues</span>[<span style=color:#e6db74>&#39;:name&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>name</span>.<span style=color:#a6e22e>trim</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>email</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>updateExpression</span>.<span style=color:#a6e22e>push</span>(<span style=color:#e6db74>&#39;#email = :email&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>attributeNames</span>[<span style=color:#e6db74>&#39;#email&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;email&#39;</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>attributeValues</span>[<span style=color:#e6db74>&#39;:email&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>email</span>.<span style=color:#a6e22e>toLowerCase</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>department</span> <span style=color:#f92672>!==</span> <span style=color:#66d9ef>undefined</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>updateExpression</span>.<span style=color:#a6e22e>push</span>(<span style=color:#e6db74>&#39;#dept = :dept&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>attributeNames</span>[<span style=color:#e6db74>&#39;#dept&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;department&#39;</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>attributeValues</span>[<span style=color:#e6db74>&#39;:dept&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>department</span>.<span style=color:#a6e22e>trim</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>updateExpression</span>.<span style=color:#a6e22e>push</span>(<span style=color:#e6db74>&#39;#updated = :updated&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>attributeNames</span>[<span style=color:#e6db74>&#39;#updated&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;updatedAt&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>attributeValues</span>[<span style=color:#e6db74>&#39;:updated&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Date().<span style=color:#a6e22e>toISOString</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>Attributes</span> } <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>docClient</span>.<span style=color:#a6e22e>send</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>UpdateCommand</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>TableName</span>: <span style=color:#66d9ef>TABLE_NAME</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>Key</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>userId</span> },
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>UpdateExpression</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`SET </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>updateExpression</span>.<span style=color:#a6e22e>join</span>(<span style=color:#e6db74>&#39;, &#39;</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>ExpressionAttributeNames</span>: <span style=color:#66d9ef>attributeNames</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>ExpressionAttributeValues</span>: <span style=color:#66d9ef>attributeValues</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>ConditionExpression</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;attribute_exists(id)&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>ReturnValues</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;ALL_NEW&#39;</span>
</span></span><span style=display:flex><span>    }));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createResponse</span>(<span style=color:#ae81ff>200</span>, <span style=color:#a6e22e>Attributes</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>UserResponse</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;ConditionalCheckFailedException&#39;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createErrorResponse</span>(<span style=color:#ae81ff>404</span>, <span style=color:#e6db74>&#39;Not Found&#39;</span>, <span style=color:#e6db74>&#39;User not found&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>&#39;Update user error:&#39;</span>, <span style=color:#a6e22e>error</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createErrorResponse</span>(<span style=color:#ae81ff>500</span>, <span style=color:#e6db74>&#39;Internal Server Error&#39;</span>, <span style=color:#e6db74>&#39;Failed to update user&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>deleteUser</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>event</span>: <span style=color:#66d9ef>APIGatewayProxyEvent</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>APIGatewayProxyResult</span>&gt; <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>userId</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>pathParameters</span><span style=color:#f92672>?</span>.<span style=color:#a6e22e>id</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>userId</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createErrorResponse</span>(<span style=color:#ae81ff>400</span>, <span style=color:#e6db74>&#39;Bad Request&#39;</span>, <span style=color:#e6db74>&#39;User ID required&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>docClient</span>.<span style=color:#a6e22e>send</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>DeleteCommand</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>TableName</span>: <span style=color:#66d9ef>TABLE_NAME</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>Key</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>userId</span> },
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>ConditionExpression</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;attribute_exists(id)&#39;</span>
</span></span><span style=display:flex><span>    }));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createResponse</span>(<span style=color:#ae81ff>204</span>, {});
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;ConditionalCheckFailedException&#39;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createErrorResponse</span>(<span style=color:#ae81ff>404</span>, <span style=color:#e6db74>&#39;Not Found&#39;</span>, <span style=color:#e6db74>&#39;User not found&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>&#39;Delete user error:&#39;</span>, <span style=color:#a6e22e>error</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createErrorResponse</span>(<span style=color:#ae81ff>500</span>, <span style=color:#e6db74>&#39;Internal Server Error&#39;</span>, <span style=color:#e6db74>&#39;Failed to delete user&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><h2 id=infrastructure-as-code-with-sam>Infrastructure as Code with SAM</h2><p>Define your API Gateway and Lambda infrastructure using a concise SAM template:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># template.yaml</span>
</span></span><span style=display:flex><span><span style=color:#f92672>AWSTemplateFormatVersion</span>: <span style=color:#e6db74>&#39;2010-09-09&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>Transform</span>: <span style=color:#ae81ff>AWS::Serverless-2016-10-31</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>Parameters</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>Stage</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>String</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Default</span>: <span style=color:#ae81ff>dev</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>AllowedValues</span>: [<span style=color:#ae81ff>dev, staging, prod]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>Globals</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>Function</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Runtime</span>: <span style=color:#ae81ff>nodejs18.x</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>CodeUri</span>: <span style=color:#ae81ff>dist/</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Timeout</span>: <span style=color:#ae81ff>30</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Environment</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>Variables</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>USERS_TABLE_NAME</span>: !<span style=color:#ae81ff>Ref UsersTable</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>Resources</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># API Gateway with OpenAPI specification</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>UsersApi</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>AWS::Serverless::Api</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>StageName</span>: !<span style=color:#ae81ff>Ref Stage</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>Cors</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>AllowMethods</span>: <span style=color:#e6db74>&#34;&#39;*&#39;&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>AllowHeaders</span>: <span style=color:#e6db74>&#34;&#39;*&#39;&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>AllowOrigin</span>: <span style=color:#e6db74>&#34;&#39;*&#39;&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>DefinitionBody</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>openapi</span>: <span style=color:#ae81ff>3.0.1</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>info</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>title</span>: !<span style=color:#ae81ff>Sub &#34;${AWS::StackName}-users-api&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>version</span>: <span style=color:#ae81ff>1.0.0</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>paths</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>/users</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>post</span>:
</span></span><span style=display:flex><span>              <span style=color:#f92672>summary</span>: <span style=color:#ae81ff>Create user</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>requestBody</span>:
</span></span><span style=display:flex><span>                <span style=color:#f92672>required</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>content</span>:
</span></span><span style=display:flex><span>                  <span style=color:#f92672>application/json</span>:
</span></span><span style=display:flex><span>                    <span style=color:#f92672>schema</span>:
</span></span><span style=display:flex><span>                      <span style=color:#f92672>$ref</span>: <span style=color:#e6db74>&#39;#/components/schemas/CreateUserRequest&#39;</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>responses</span>:
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#39;201&#39;</span>:
</span></span><span style=display:flex><span>                  <span style=color:#f92672>description</span>: <span style=color:#ae81ff>User created</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>content</span>:
</span></span><span style=display:flex><span>                    <span style=color:#f92672>application/json</span>:
</span></span><span style=display:flex><span>                      <span style=color:#f92672>schema</span>:
</span></span><span style=display:flex><span>                        <span style=color:#f92672>$ref</span>: <span style=color:#e6db74>&#39;#/components/schemas/UserResponse&#39;</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>x-amazon-apigateway-integration</span>:
</span></span><span style=display:flex><span>                <span style=color:#f92672>type</span>: <span style=color:#ae81ff>aws_proxy</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>httpMethod</span>: <span style=color:#ae81ff>POST</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>uri</span>: !<span style=color:#ae81ff>Sub &#34;arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/${CreateUserFunction.Arn}/invocations&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#ae81ff>/users/{id}:</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>get</span>:
</span></span><span style=display:flex><span>              <span style=color:#f92672>summary</span>: <span style=color:#ae81ff>Get user</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>parameters</span>:
</span></span><span style=display:flex><span>                - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>id</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>in</span>: <span style=color:#ae81ff>path</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>required</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>schema</span>: { <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string }</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>responses</span>:
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#39;200&#39;</span>:
</span></span><span style=display:flex><span>                  <span style=color:#f92672>description</span>: <span style=color:#ae81ff>User found</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>content</span>:
</span></span><span style=display:flex><span>                    <span style=color:#f92672>application/json</span>:
</span></span><span style=display:flex><span>                      <span style=color:#f92672>schema</span>:
</span></span><span style=display:flex><span>                        <span style=color:#f92672>$ref</span>: <span style=color:#e6db74>&#39;#/components/schemas/UserResponse&#39;</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>x-amazon-apigateway-integration</span>:
</span></span><span style=display:flex><span>                <span style=color:#f92672>type</span>: <span style=color:#ae81ff>aws_proxy</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>httpMethod</span>: <span style=color:#ae81ff>POST</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>uri</span>: !<span style=color:#ae81ff>Sub &#34;arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/${GetUserFunction.Arn}/invocations&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>components</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>schemas</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>CreateUserRequest</span>:
</span></span><span style=display:flex><span>              <span style=color:#f92672>type</span>: <span style=color:#ae81ff>object</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>required</span>: [<span style=color:#ae81ff>name, email]</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>properties</span>:
</span></span><span style=display:flex><span>                <span style=color:#f92672>name</span>: { <span style=color:#f92672>type: string, minLength</span>: <span style=color:#ae81ff>1</span> }
</span></span><span style=display:flex><span>                <span style=color:#f92672>email</span>: { <span style=color:#f92672>type: string, format</span>: <span style=color:#ae81ff>email }</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>department</span>: { <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string }</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>UserResponse</span>:
</span></span><span style=display:flex><span>              <span style=color:#f92672>type</span>: <span style=color:#ae81ff>object</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>properties</span>:
</span></span><span style=display:flex><span>                <span style=color:#f92672>id</span>: { <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string }</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>name</span>: { <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string }</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>email</span>: { <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string }</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>department</span>: { <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string }</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>createdAt</span>: { <span style=color:#f92672>type: string, format</span>: <span style=color:#ae81ff>date-time }</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>updatedAt</span>: { <span style=color:#f92672>type: string, format</span>: <span style=color:#ae81ff>date-time }</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Lambda Functions</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>CreateUserFunction</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>AWS::Serverless::Function</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>Handler</span>: <span style=color:#ae81ff>handlers/users.createUser</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>Events</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>CreateUser</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>Api</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>RestApiId</span>: !<span style=color:#ae81ff>Ref UsersApi</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>Path</span>: <span style=color:#ae81ff>/users</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>Method</span>: <span style=color:#ae81ff>POST</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>Policies</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>DynamoDBWritePolicy</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>TableName</span>: !<span style=color:#ae81ff>Ref UsersTable</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>GetUserFunction</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>AWS::Serverless::Function</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>Handler</span>: <span style=color:#ae81ff>handlers/users.getUser</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>Events</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>GetUser</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>Api</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>RestApiId</span>: !<span style=color:#ae81ff>Ref UsersApi</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>Path</span>: <span style=color:#ae81ff>/users/{id}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>Method</span>: <span style=color:#ae81ff>GET</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>Policies</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>DynamoDBReadPolicy</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>TableName</span>: !<span style=color:#ae81ff>Ref UsersTable</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>UpdateUserFunction</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>AWS::Serverless::Function</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>Handler</span>: <span style=color:#ae81ff>handlers/users.updateUser</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>Events</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>UpdateUser</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>Api</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>RestApiId</span>: !<span style=color:#ae81ff>Ref UsersApi</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>Path</span>: <span style=color:#ae81ff>/users/{id}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>Method</span>: <span style=color:#ae81ff>PUT</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>Policies</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>DynamoDBWritePolicy</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>TableName</span>: !<span style=color:#ae81ff>Ref UsersTable</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>DeleteUserFunction</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>AWS::Serverless::Function</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>Handler</span>: <span style=color:#ae81ff>handlers/users.deleteUser</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>Events</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>DeleteUser</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>Api</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>RestApiId</span>: !<span style=color:#ae81ff>Ref UsersApi</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>Path</span>: <span style=color:#ae81ff>/users/{id}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>Method</span>: <span style=color:#ae81ff>DELETE</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>Policies</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>DynamoDBWritePolicy</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>TableName</span>: !<span style=color:#ae81ff>Ref UsersTable</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># DynamoDB Table</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>UsersTable</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>AWS::DynamoDB::Table</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>BillingMode</span>: <span style=color:#ae81ff>PAY_PER_REQUEST</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>AttributeDefinitions</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>AttributeName</span>: <span style=color:#ae81ff>id</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>AttributeType</span>: <span style=color:#ae81ff>S</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>KeySchema</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>AttributeName</span>: <span style=color:#ae81ff>id</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>KeyType</span>: <span style=color:#ae81ff>HASH</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>PointInTimeRecoverySpecification</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>PointInTimeRecoveryEnabled</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>Outputs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>ApiUrl</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Description</span>: <span style=color:#ae81ff>API Gateway endpoint URL</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Value</span>: !<span style=color:#ae81ff>Sub &#34;https://${UsersApi}.execute-api.${AWS::Region}.amazonaws.com/${Stage}&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Export</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>Name</span>: !<span style=color:#ae81ff>Sub &#34;${AWS::StackName}-api-url&#34;</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>TableName</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Description</span>: <span style=color:#ae81ff>DynamoDB table name</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Value</span>: !<span style=color:#ae81ff>Ref UsersTable</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Export</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>Name</span>: !<span style=color:#ae81ff>Sub &#34;${AWS::StackName}-table-name&#34;</span>
</span></span></code></pre></div><h2 id=advanced-patterns-and-best-practices>Advanced Patterns and Best Practices</h2><h3 id=requestresponse-middleware>Request/Response Middleware</h3><p>Implement middleware for common concerns:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// src/utils/middleware.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>APIGatewayProxyEvent</span>, <span style=color:#a6e22e>APIGatewayProxyResult</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;aws-lambda&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createErrorResponse</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;./response&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>HandlerFunction</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>event</span>: <span style=color:#66d9ef>APIGatewayProxyEvent</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>APIGatewayProxyResult</span>&gt;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>withErrorHandling</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>handler</span>: <span style=color:#66d9ef>HandlerFunction</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>HandlerFunction</span> <span style=color:#f92672>=&gt;</span> 
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>event</span>: <span style=color:#66d9ef>APIGatewayProxyEvent</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>handler</span>(<span style=color:#a6e22e>event</span>);
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>&#39;Unhandled error:&#39;</span>, <span style=color:#a6e22e>error</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createErrorResponse</span>(<span style=color:#ae81ff>500</span>, <span style=color:#e6db74>&#39;Internal Server Error&#39;</span>, <span style=color:#e6db74>&#39;An unexpected error occurred&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>withRequestLogging</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>handler</span>: <span style=color:#66d9ef>HandlerFunction</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>HandlerFunction</span> <span style=color:#f92672>=&gt;</span> 
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>event</span>: <span style=color:#66d9ef>APIGatewayProxyEvent</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>requestId</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>requestContext</span>.<span style=color:#a6e22e>requestId</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`[</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>requestId</span><span style=color:#e6db74>}</span><span style=color:#e6db74>] </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>httpMethod</span><span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>path</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>startTime</span> <span style=color:#f92672>=</span> Date.<span style=color:#a6e22e>now</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>handler</span>(<span style=color:#a6e22e>event</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>duration</span> <span style=color:#f92672>=</span> Date.<span style=color:#a6e22e>now</span>() <span style=color:#f92672>-</span> <span style=color:#a6e22e>startTime</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`[</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>requestId</span><span style=color:#e6db74>}</span><span style=color:#e6db74>] Response: </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>statusCode</span><span style=color:#e6db74>}</span><span style=color:#e6db74> (</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>duration</span><span style=color:#e6db74>}</span><span style=color:#e6db74>ms)`</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>result</span>;
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>compose</span> <span style=color:#f92672>=</span> (...<span style=color:#a6e22e>middlewares</span>: <span style=color:#66d9ef>any</span>[]) <span style=color:#f92672>=&gt;</span> (<span style=color:#a6e22e>handler</span>: <span style=color:#66d9ef>HandlerFunction</span>) <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>middlewares</span>.<span style=color:#a6e22e>reduceRight</span>((<span style=color:#a6e22e>acc</span>, <span style=color:#a6e22e>middleware</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>middleware</span>(<span style=color:#a6e22e>acc</span>), <span style=color:#a6e22e>handler</span>);
</span></span></code></pre></div><h3 id=schema-validation-with-json-schema>Schema Validation with JSON Schema</h3><p>For complex validation scenarios, use JSON Schema:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// src/utils/schema-validation.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Ajv</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;ajv&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>addFormats</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;ajv-formats&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ajv</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Ajv</span>({ <span style=color:#a6e22e>allErrors</span>: <span style=color:#66d9ef>true</span> });
</span></span><span style=display:flex><span><span style=color:#a6e22e>addFormats</span>(<span style=color:#a6e22e>ajv</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>createUserSchema</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;object&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;name&#39;</span>, <span style=color:#e6db74>&#39;email&#39;</span>],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>properties</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> { <span style=color:#66d9ef>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;string&#39;</span>, <span style=color:#a6e22e>minLength</span>: <span style=color:#66d9ef>1</span>, <span style=color:#a6e22e>maxLength</span>: <span style=color:#66d9ef>100</span> },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>email</span><span style=color:#f92672>:</span> { <span style=color:#66d9ef>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;string&#39;</span>, <span style=color:#a6e22e>format</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;email&#39;</span>, <span style=color:#a6e22e>maxLength</span>: <span style=color:#66d9ef>255</span> },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>department</span><span style=color:#f92672>:</span> { <span style=color:#66d9ef>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;string&#39;</span>, <span style=color:#a6e22e>maxLength</span>: <span style=color:#66d9ef>100</span> }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>additionalProperties</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>validateCreateUserSchema</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ajv</span>.<span style=color:#a6e22e>compile</span>(<span style=color:#a6e22e>createUserSchema</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>getValidationErrors</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>validate</span>: <span style=color:#66d9ef>any</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span>[] <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>validate</span>.<span style=color:#a6e22e>errors</span><span style=color:#f92672>?</span>.<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>error</span>: <span style=color:#66d9ef>any</span>) <span style=color:#f92672>=&gt;</span> 
</span></span><span style=display:flex><span>    <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>instancePath</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;root&#39;</span><span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>message</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>  ) <span style=color:#f92672>||</span> [];
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><h2 id=comprehensive-testing-strategy>Comprehensive Testing Strategy</h2><p>Implement thorough testing for type-safe APIs:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// tests/api.test.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>APIGatewayProxyEvent</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;aws-lambda&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createUser</span>, <span style=color:#a6e22e>getUser</span>, <span style=color:#a6e22e>updateUser</span>, <span style=color:#a6e22e>deleteUser</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../src/handlers/users&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>CreateUserRequest</span>, <span style=color:#a6e22e>UpdateUserRequest</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../src/types/api&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Mock AWS SDK
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>jest</span>.<span style=color:#a6e22e>mock</span>(<span style=color:#e6db74>&#39;@aws-sdk/lib-dynamodb&#39;</span>, () <span style=color:#f92672>=&gt;</span> ({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>DynamoDBDocumentClient</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>from</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>jest</span>.<span style=color:#a6e22e>fn</span>(() <span style=color:#f92672>=&gt;</span> ({ <span style=color:#a6e22e>send</span>: <span style=color:#66d9ef>jest.fn</span>() }))
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>PutCommand</span>: <span style=color:#66d9ef>jest.fn</span>(),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>GetCommand</span>: <span style=color:#66d9ef>jest.fn</span>(),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>UpdateCommand</span>: <span style=color:#66d9ef>jest.fn</span>(),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>DeleteCommand</span>: <span style=color:#66d9ef>jest.fn</span>()
</span></span><span style=display:flex><span>}));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>createMockEvent</span> <span style=color:#f92672>=</span> (
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>body?</span>: <span style=color:#66d9ef>any</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pathParameters?</span>: <span style=color:#66d9ef>Record</span>&lt;<span style=color:#f92672>string</span>, <span style=color:#a6e22e>string</span>&gt;
</span></span><span style=display:flex><span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>APIGatewayProxyEvent</span> <span style=color:#f92672>=&gt;</span> ({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>body</span>: <span style=color:#66d9ef>body</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>body</span>) <span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pathParameters</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>headers</span><span style=color:#f92672>:</span> {},
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>multiValueHeaders</span><span style=color:#f92672>:</span> {},
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>httpMethod</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;POST&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>isBase64Encoded</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/users&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>queryStringParameters</span>: <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>multiValueQueryStringParameters</span>: <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stageVariables</span>: <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>requestContext</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>requestId</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;test-request-id&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ... other required properties
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  } <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>any</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>resource</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;Users API Handlers&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>beforeEach</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>jest</span>.<span style=color:#a6e22e>clearAllMocks</span>();
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;createUser&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;creates user with valid data&#39;</span>, <span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>validUser</span>: <span style=color:#66d9ef>CreateUserRequest</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;John Doe&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>email</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;john@example.com&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>department</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Engineering&#39;</span>
</span></span><span style=display:flex><span>      };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>event</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createMockEvent</span>(<span style=color:#a6e22e>validUser</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>createUser</span>(<span style=color:#a6e22e>event</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>statusCode</span>).<span style=color:#a6e22e>toBe</span>(<span style=color:#ae81ff>201</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>responseBody</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>body</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>responseBody</span>.<span style=color:#a6e22e>name</span>).<span style=color:#a6e22e>toBe</span>(<span style=color:#e6db74>&#39;John Doe&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>responseBody</span>.<span style=color:#a6e22e>email</span>).<span style=color:#a6e22e>toBe</span>(<span style=color:#e6db74>&#39;john@example.com&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>responseBody</span>.<span style=color:#a6e22e>id</span>).<span style=color:#a6e22e>toBeDefined</span>();
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;rejects invalid email format&#39;</span>, <span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>invalidUser</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;John Doe&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>email</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;invalid-email&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>department</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Engineering&#39;</span>
</span></span><span style=display:flex><span>      };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>event</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createMockEvent</span>(<span style=color:#a6e22e>invalidUser</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>createUser</span>(<span style=color:#a6e22e>event</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>statusCode</span>).<span style=color:#a6e22e>toBe</span>(<span style=color:#ae81ff>400</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>responseBody</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>body</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>responseBody</span>.<span style=color:#a6e22e>error</span>).<span style=color:#a6e22e>toBe</span>(<span style=color:#e6db74>&#39;Validation Error&#39;</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;handles missing request body&#39;</span>, <span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>event</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createMockEvent</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>createUser</span>(<span style=color:#a6e22e>event</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>statusCode</span>).<span style=color:#a6e22e>toBe</span>(<span style=color:#ae81ff>400</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>responseBody</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>body</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>responseBody</span>.<span style=color:#a6e22e>message</span>).<span style=color:#a6e22e>toBe</span>(<span style=color:#e6db74>&#39;Request body required&#39;</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;updateUser&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;updates user with partial data&#39;</span>, <span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>updateData</span>: <span style=color:#66d9ef>UpdateUserRequest</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Jane Doe&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>department</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Product&#39;</span>
</span></span><span style=display:flex><span>      };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>event</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createMockEvent</span>(<span style=color:#a6e22e>updateData</span>, { <span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;user-123&#39;</span> });
</span></span><span style=display:flex><span>      <span style=color:#75715e>// Mock successful DynamoDB response would go here
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>updateUser</span>(<span style=color:#a6e22e>event</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>statusCode</span>).<span style=color:#a6e22e>toBeDefined</span>();
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;rejects empty update request&#39;</span>, <span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>emptyUpdate</span> <span style=color:#f92672>=</span> {};
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>event</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createMockEvent</span>(<span style=color:#a6e22e>emptyUpdate</span>, { <span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;user-123&#39;</span> });
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>updateUser</span>(<span style=color:#a6e22e>event</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>statusCode</span>).<span style=color:#a6e22e>toBe</span>(<span style=color:#ae81ff>400</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h2 id=local-development-environment>Local Development Environment</h2><p>Set up efficient local development with hot reloading:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;aws-api-gateway-typescript&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;version&#34;</span>: <span style=color:#e6db74>&#34;1.0.0&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;scripts&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;build&#34;</span>: <span style=color:#e6db74>&#34;tsc&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;build:watch&#34;</span>: <span style=color:#e6db74>&#34;tsc --watch&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;test&#34;</span>: <span style=color:#e6db74>&#34;jest&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;test:watch&#34;</span>: <span style=color:#e6db74>&#34;jest --watch&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;test:coverage&#34;</span>: <span style=color:#e6db74>&#34;jest --coverage&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;lint&#34;</span>: <span style=color:#e6db74>&#34;eslint src/**/*.ts --fix&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;local:api&#34;</span>: <span style=color:#e6db74>&#34;sam local start-api --parameter-overrides Stage=local --docker-network lambda-local&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;local:dynamodb&#34;</span>: <span style=color:#e6db74>&#34;docker run -p 8000:8000 amazon/dynamodb-local&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;deploy:dev&#34;</span>: <span style=color:#e6db74>&#34;sam build &amp;&amp; sam deploy --parameter-overrides Stage=dev --config-env dev&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;deploy:prod&#34;</span>: <span style=color:#e6db74>&#34;sam build &amp;&amp; sam deploy --parameter-overrides Stage=prod --config-env prod&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;logs:tail&#34;</span>: <span style=color:#e6db74>&#34;sam logs --name CreateUserFunction --stack-name users-api-dev --tail&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;dependencies&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;@aws-sdk/client-dynamodb&#34;</span>: <span style=color:#e6db74>&#34;^3.300.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;@aws-sdk/lib-dynamodb&#34;</span>: <span style=color:#e6db74>&#34;^3.300.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;uuid&#34;</span>: <span style=color:#e6db74>&#34;^9.0.0&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;devDependencies&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;@types/aws-lambda&#34;</span>: <span style=color:#e6db74>&#34;^8.10.114&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;@types/jest&#34;</span>: <span style=color:#e6db74>&#34;^29.5.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;@types/node&#34;</span>: <span style=color:#e6db74>&#34;^18.15.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;@types/uuid&#34;</span>: <span style=color:#e6db74>&#34;^9.0.1&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;jest&#34;</span>: <span style=color:#e6db74>&#34;^29.5.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;ts-jest&#34;</span>: <span style=color:#e6db74>&#34;^29.1.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;typescript&#34;</span>: <span style=color:#e6db74>&#34;^5.0.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;eslint&#34;</span>: <span style=color:#e6db74>&#34;^8.37.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;@typescript-eslint/eslint-plugin&#34;</span>: <span style=color:#e6db74>&#34;^5.57.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;@typescript-eslint/parser&#34;</span>: <span style=color:#e6db74>&#34;^5.57.0&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;jest&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;preset&#34;</span>: <span style=color:#e6db74>&#34;ts-jest&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;testEnvironment&#34;</span>: <span style=color:#e6db74>&#34;node&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;collectCoverageFrom&#34;</span>: [
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;src/**/*.ts&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;!src/**/*.d.ts&#34;</span>
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;coverageThreshold&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;global&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;branches&#34;</span>: <span style=color:#ae81ff>80</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;functions&#34;</span>: <span style=color:#ae81ff>80</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;lines&#34;</span>: <span style=color:#ae81ff>80</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;statements&#34;</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=security-and-monitoring-best-practices>Security and Monitoring Best Practices</h2><h3 id=request-rate-limiting-and-throttling>Request Rate Limiting and Throttling</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># In your SAM template</span>
</span></span><span style=display:flex><span><span style=color:#f92672>UsersApi</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>AWS::Serverless::Api</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>ThrottleConfig</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>BurstLimit</span>: <span style=color:#ae81ff>1000</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>RateLimit</span>: <span style=color:#ae81ff>500</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>RequestValidatorId</span>: !<span style=color:#ae81ff>Ref RequestValidator</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#f92672>RequestValidator</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>AWS::ApiGateway::RequestValidator</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>RestApiId</span>: !<span style=color:#ae81ff>Ref UsersApi</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ValidateRequestBody</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ValidateRequestParameters</span>: <span style=color:#66d9ef>true</span>
</span></span></code></pre></div><h3 id=api-key-management>API Key Management</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// src/utils/auth.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>APIGatewayProxyEvent</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;aws-lambda&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createErrorResponse</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;./response&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>validateApiKey</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>event</span>: <span style=color:#66d9ef>APIGatewayProxyEvent</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>apiKey</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>headers</span>[<span style=color:#e6db74>&#39;x-api-key&#39;</span>] <span style=color:#f92672>||</span> <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>headers</span>[<span style=color:#e6db74>&#39;X-API-Key&#39;</span>];
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>apiKey</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createErrorResponse</span>(<span style=color:#ae81ff>401</span>, <span style=color:#e6db74>&#39;Unauthorized&#39;</span>, <span style=color:#e6db74>&#39;API key required&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>// In production, validate against AWS API Gateway or external service
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>apiKey</span> <span style=color:#f92672>!==</span> <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>EXPECTED_API_KEY</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createErrorResponse</span>(<span style=color:#ae81ff>403</span>, <span style=color:#e6db74>&#39;Forbidden&#39;</span>, <span style=color:#e6db74>&#39;Invalid API key&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>; <span style=color:#75715e>// Valid key
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span></code></pre></div><h3 id=cloudwatch-integration>CloudWatch Integration</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// src/utils/metrics.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>CloudWatchClient</span>, <span style=color:#a6e22e>PutMetricDataCommand</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@aws-sdk/client-cloudwatch&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>cloudWatch</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>CloudWatchClient</span>({});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>recordMetric</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>metricName</span>: <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>value</span>: <span style=color:#66d9ef>number</span>, <span style=color:#a6e22e>unit</span>: <span style=color:#66d9ef>string</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Count&#39;</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>cloudWatch</span>.<span style=color:#a6e22e>send</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>PutMetricDataCommand</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>Namespace</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;UsersAPI&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>MetricData</span><span style=color:#f92672>:</span> [{
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>MetricName</span>: <span style=color:#66d9ef>metricName</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Value</span>: <span style=color:#66d9ef>value</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Unit</span>: <span style=color:#66d9ef>unit</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Timestamp</span>: <span style=color:#66d9ef>new</span> Date()
</span></span><span style=display:flex><span>      }]
</span></span><span style=display:flex><span>    }));
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>&#39;Failed to record metric:&#39;</span>, <span style=color:#a6e22e>error</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Usage in handlers
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>createUserWithMetrics</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>event</span>: <span style=color:#66d9ef>APIGatewayProxyEvent</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>startTime</span> <span style=color:#f92672>=</span> Date.<span style=color:#a6e22e>now</span>();
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>createUser</span>(<span style=color:#a6e22e>event</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>recordMetric</span>(<span style=color:#e6db74>&#39;UserCreated&#39;</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>recordMetric</span>(<span style=color:#e6db74>&#39;CreateUserLatency&#39;</span>, Date.<span style=color:#a6e22e>now</span>() <span style=color:#f92672>-</span> <span style=color:#a6e22e>startTime</span>, <span style=color:#e6db74>&#39;Milliseconds&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>result</span>;
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>recordMetric</span>(<span style=color:#e6db74>&#39;CreateUserError&#39;</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>throw</span> <span style=color:#a6e22e>error</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><h2 id=deployment-and-operations>Deployment and Operations</h2><div class=plantuml-container><img id=plantuml-deployment-pipeline class=plantuml-diagram>
<a id=plantuml-link-deployment-pipeline href=# target=_blank class=plantuml-link title="Open diagram in new window"><span class=plantuml-link-icon>🔍</span></a></div><script src=/js/rawdeflate.js></script><script>function encode64(e){r="";for(i=0;i<e.length;i+=3)i+2==e.length?r+=append3bytes(e.charCodeAt(i),e.charCodeAt(i+1),0):i+1==e.length?r+=append3bytes(e.charCodeAt(i),0,0):r+=append3bytes(e.charCodeAt(i),e.charCodeAt(i+1),e.charCodeAt(i+2));return r}function append3bytes(e,t,n){return c1=e>>2,c2=(e&3)<<4|t>>4,c3=(t&15)<<2|n>>6,c4=n&63,r="",r+=encode6bit(c1&63),r+=encode6bit(c2&63),r+=encode6bit(c3&63),r+=encode6bit(c4&63),r}function encode6bit(e){return e<10?String.fromCharCode(48+e):(e-=10,e<26?String.fromCharCode(65+e):(e-=26,e<26?String.fromCharCode(97+e):(e-=26,e==0?"-":e==1?"_":"?")))}var deflater=window.SharedWorker&&new SharedWorker("/js/rawdeflate.js");deflater?(deflater.port.addEventListener("message",done_deflating,!1),deflater.port.start()):window.Worker&&(deflater=new Worker("/js/rawdeflate.js"),deflater.onmessage=done_deflating);function done_deflating(e){const s=document.getElementById("plantuml-deployment-pipeline"),t="https://www.plantuml.com/plantuml/img/"+encode64(e.data);s.src=t;const n=document.getElementById("plantuml-link-deployment-pipeline");n&&(n.href=t)}function compress(e){e=unescape(encodeURIComponent(e)),deflater?deflater.port&&deflater.port.postMessage?deflater.port.postMessage(e):deflater.postMessage(e):setTimeout(function(){done_deflating({data:deflate(e)})},100)}compress(`
@startuml Deployment Pipeline
!define RECTANGLE class

rectangle "Development" as dev {
  rectangle "Local SAM" as local
  rectangle "Unit Tests" as tests
  rectangle "Type Checking" as types
}

rectangle "CI/CD Pipeline" as cicd {
  rectangle "Build" as build
  rectangle "Test" as citest
  rectangle "Security Scan" as security
}

rectangle "AWS Environments" as aws {
  rectangle "Dev Stage" as devstage
  rectangle "Staging Stage" as staging
  rectangle "Prod Stage" as prod
}

dev --> cicd : Push to Git
cicd --> devstage : Auto Deploy
devstage --> staging : Manual Promotion
staging --> prod : Manual Promotion

note right of cicd
  • TypeScript compilation
  • Linting and formatting
  • Unit & integration tests
  • SAM build and package
end note

note right of aws
  • API Gateway stages  • Lambda versions
  • DynamoDB tables
  • CloudWatch monitoring
end note
@enduml
`)</script><h3 id=multi-stage-deployment>Multi-Stage Deployment</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># samconfig.toml</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>version = 0.1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#ae81ff>default]</span>
</span></span><span style=display:flex><span>[<span style=color:#ae81ff>default.global.parameters]</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>stack_name = &#34;users-api&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#ae81ff>default.build.parameters]</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>cached = true</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>parallel = true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#ae81ff>default.deploy.parameters]</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>capabilities = &#34;CAPABILITY_IAM&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>confirm_changeset = true</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>resolve_s3 = true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#ae81ff>dev]</span>
</span></span><span style=display:flex><span>[<span style=color:#ae81ff>dev.deploy.parameters]</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>stack_name = &#34;users-api-dev&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>s3_prefix = &#34;users-api-dev&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>region = &#34;us-east-1&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>parameter_overrides = &#34;Stage=dev&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#ae81ff>prod]</span>
</span></span><span style=display:flex><span>[<span style=color:#ae81ff>prod.deploy.parameters]</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>stack_name = &#34;users-api-prod&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>s3_prefix = &#34;users-api-prod&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>region = &#34;us-east-1&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>parameter_overrides = &#34;Stage=prod&#34;</span>
</span></span></code></pre></div><h2 id=performance-optimization>Performance Optimization</h2><h3 id=response-caching>Response Caching</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// src/utils/cache.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>APIGatewayProxyEvent</span>, <span style=color:#a6e22e>APIGatewayProxyResult</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;aws-lambda&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>withCaching</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>handler</span>: <span style=color:#66d9ef>Function</span>, <span style=color:#a6e22e>ttlSeconds</span>: <span style=color:#66d9ef>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>300</span>) <span style=color:#f92672>=&gt;</span> 
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>event</span>: <span style=color:#66d9ef>APIGatewayProxyEvent</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>APIGatewayProxyResult</span>&gt; <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>handler</span>(<span style=color:#a6e22e>event</span>);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>statusCode</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>200</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>headers</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        ...<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>headers</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;Cache-Control&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`max-age=</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>ttlSeconds</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;ETag&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`&#34;</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>Buffer</span>.<span style=color:#66d9ef>from</span>(<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>body</span>).<span style=color:#a6e22e>toString</span>(<span style=color:#e6db74>&#39;base64&#39;</span>).<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>32</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;`</span>
</span></span><span style=display:flex><span>      };
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>result</span>;
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Usage
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>getCachedUser</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>withCaching</span>(<span style=color:#a6e22e>getUser</span>, <span style=color:#ae81ff>600</span>); <span style=color:#75715e>// 10 minutes
</span></span></span></code></pre></div><h3 id=connection-reuse>Connection Reuse</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// src/utils/db.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>DynamoDBClient</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@aws-sdk/client-dynamodb&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>DynamoDBDocumentClient</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@aws-sdk/lib-dynamodb&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Reuse connection across Lambda invocations
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>docClient</span>: <span style=color:#66d9ef>DynamoDBDocumentClient</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>getDocumentClient</span> <span style=color:#f92672>=</span> ()<span style=color:#f92672>:</span> <span style=color:#a6e22e>DynamoDBDocumentClient</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>docClient</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>dynamoClient</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>DynamoDBClient</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>maxAttempts</span>: <span style=color:#66d9ef>3</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>retryMode</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;adaptive&#39;</span>
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>docClient</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>DynamoDBDocumentClient</span>.<span style=color:#66d9ef>from</span>(<span style=color:#a6e22e>dynamoClient</span>, {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>marshallOptions</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>convertEmptyValues</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>removeUndefinedValues</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>docClient</span>;
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><h2 id=conclusion>Conclusion</h2><p>Building type-safe APIs with AWS API Gateway and TypeScript creates a robust foundation for scalable applications. This approach provides:</p><ul><li><strong>Compile-time Safety</strong>: Catch errors before deployment</li><li><strong>Developer Experience</strong>: Enhanced tooling and documentation</li><li><strong>Maintainability</strong>: Clear contracts and consistent patterns</li><li><strong>Production Readiness</strong>: Comprehensive error handling and monitoring</li></ul><p>The patterns demonstrated here extend to support authentication, complex validation, caching, and advanced API features. Key takeaways include:</p><ol><li><strong>Start with Types</strong>: Define clear interfaces that serve as contracts</li><li><strong>Validate Early</strong>: Use type guards and schema validation at API boundaries</li><li><strong>Handle Errors Gracefully</strong>: Provide consistent error responses with proper HTTP codes</li><li><strong>Test Thoroughly</strong>: Implement comprehensive testing at unit and integration levels</li><li><strong>Monitor Actively</strong>: Use CloudWatch metrics and logging for production insights</li></ol><p>In our next post, we&rsquo;ll explore <strong>DynamoDB with TypeScript</strong>, building upon these API patterns to create type-safe data access layers that integrate seamlessly with your API Gateway endpoints.</p></div><div class=social-share><h3 class=social-share-title>Share this post</h3><div class=social-share-buttons><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F&text=Building+Type-Safe+APIs+with+AWS+API+Gateway+and+TypeScript+-+%3Cp%3EBuilding+robust+APIs+requires+more+than+just+handling+HTTP+requests%E2%80%94it+demands+type+safety%2C+proper+validation%2C+and+clear+documentation.+In+this+post%2C+%E2%80%A6%3C%2Fp%3E" target=_blank rel="noopener noreferrer" class="social-share-button twitter" title="Share on Twitter"><svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
<span>Twitter</span>
</a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F" target=_blank rel="noopener noreferrer" class="social-share-button linkedin" title="Share on LinkedIn"><svg viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853.0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601.0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144.0-2.063-.926-2.063-2.065.0-1.138.92-2.063 2.063-2.063 1.14.0 2.064.925 2.064 2.063.0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225.0H1.771C.792.0.0.774.0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2.0 22.222.0h.003z"/></svg>
<span>LinkedIn</span>
</a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F" target=_blank rel="noopener noreferrer" class="social-share-button facebook" title="Share on Facebook"><svg viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312.0 2.686.235 2.686.235v2.953H15.83c-1.491.0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
<span>Facebook</span>
</a><a href="https://reddit.com/submit?url=https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F&title=Building+Type-Safe+APIs+with+AWS+API+Gateway+and+TypeScript" target=_blank rel="noopener noreferrer" class="social-share-button reddit" title="Share on Reddit"><svg viewBox="0 0 24 24"><path d="M12 0A12 12 0 000 12a12 12 0 0012 12 12 12 0 0012-12A12 12 0 0012 0zm5.01 4.744c.688.0 1.25.561 1.25 1.249a1.25 1.25.0 01-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968.0 1.754.786 1.754 1.754.0.716-.435 1.333-1.01 1.614a3.111 3.111.0 01.042.52c0 2.694-3.13 4.87-7.004 4.87s-7.004-2.176-7.004-4.87c0-.183.015-.366.043-.534A1.748 1.748.0 014.028 12c0-.968.786-1.754 1.754-1.754.463.0.898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342.0 01.14-.197.35.35.0 01.238-.042l2.906.617a1.214 1.214.0 011.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687.0 1.248-.561 1.248-1.249S9.937 12 9.249 12zm5.5.0c-.687.0-1.248.561-1.248 1.25.0.687.561 1.248 1.249 1.248S16 13.937 16 13.249c0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327.0 00-.231.094.33.33.0 000 .463c.842.842 2.484.913 2.961.913s2.105-.056 2.961-.913a.361.361.0 00.029-.463.33.33.0 00-.464.0c-.547.533-1.684.73-2.512.73-.828.0-1.979-.196-2.512-.73a.326.326.0 00-.232-.095z"/></svg>
<span>Reddit</span>
</a><a href="https://news.ycombinator.com/submitlink?u=https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F&t=Building+Type-Safe+APIs+with+AWS+API+Gateway+and+TypeScript" target=_blank rel="noopener noreferrer" class="social-share-button hackernews" title="Share on Hacker News"><svg viewBox="0 0 24 24"><path d="M0 24V0h24v24H0zM6.951 5.896l4.112 7.708v5.064h1.583v-4.972l4.148-7.799h-1.749l-2.457 4.875c-.372.745-.688 1.434-.688 1.434s-.297-.708-.651-1.434L8.831 5.896h-1.88z"/></svg>
<span>Hacker News</span>
</a><a href="https://wa.me/?text=Building+Type-Safe+APIs+with+AWS+API+Gateway+and+TypeScript+https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F" target=_blank rel="noopener noreferrer" class="social-share-button whatsapp" title="Share on WhatsApp"><svg viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198.0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479.0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87.0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86.0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64.0 5.122 1.03 6.988 2.898a9.825 9.825.0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815.0 0012.05.0C5.495.0.16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882.0 005.683 1.448h.005c6.554.0 11.89-5.335 11.893-11.893A11.821 11.821.0 0020.465 3.488"/></svg>
<span>WhatsApp</span>
</a><a href="mailto:?subject=Building+Type-Safe+APIs+with+AWS+API+Gateway+and+TypeScript&body=Check+out+this+article%3A+Building+Type-Safe+APIs+with+AWS+API+Gateway+and+TypeScript+-+https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F" class="social-share-button email" title="Share via Email"><svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1.0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1.0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"/></svg>
<span>Email</span>
</a><button type=button class="social-share-button copy-link" data-url=https://scottobert.com/posts/aws-api-gateway-typescript/ title="Copy link to clipboard">
<svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1.0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1.0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1.0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
<span>Copy Link</span></button></div></div><script>(function(){const n=document.querySelectorAll(".copy-link");n.forEach(n=>{n.addEventListener("click",function(){const n=this.getAttribute("data-url");navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(n).then(()=>{t(this)}).catch(()=>{e(n,this)}):e(n,this)})});function e(e,n){const o=document.createElement("textarea");o.value=e,o.style.position="fixed",o.style.left="-999999px",o.style.top="-999999px",document.body.appendChild(o),o.focus(),o.select();try{document.execCommand("copy"),t(n)}catch(e){console.error("Fallback: Unable to copy",e),s(n)}document.body.removeChild(o)}function t(e){const t=e.querySelector("span").textContent;e.querySelector("span").textContent="Copied!",e.classList.add("copied"),setTimeout(()=>{e.querySelector("span").textContent=t,e.classList.remove("copied")},2e3)}function s(e){const t=e.querySelector("span").textContent;e.querySelector("span").textContent="Error",e.classList.add("error"),setTimeout(()=>{e.querySelector("span").textContent=t,e.classList.remove("error")},2e3)}})()</script><div id=comments-section style="margin-top:2rem;padding-top:2rem;border-top:1px solid #e1e5e9"><h3 style=margin-bottom:1rem;color:#586069>Comments</h3><script src=https://giscus.app/client.js data-repo=scottobert/scottobert.github.io data-repo-id=R_kgDOHRSG6A data-category=General data-category-id=DIC_kwDOHRSG6M4CrQaA data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=1 data-input-position=top data-theme=light data-lang=en data-loading=lazy crossorigin=anonymous async></script></div></article><div class=floating-social-share id=floating-share><div class=floating-share-toggle id=share-toggle title="Share this post"><svg viewBox="0 0 24 24"><path d="M18 16.08c-.76.0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66.0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66.0-3 1.34-3 3s1.34 3 3 3c.79.0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65.0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"/></svg></div><div class=floating-share-buttons id=share-buttons><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F&text=Building+Type-Safe+APIs+with+AWS+API+Gateway+and+TypeScript" target=_blank rel="noopener noreferrer" class="floating-share-button twitter" title="Share on Twitter"><svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
</a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F" target=_blank rel="noopener noreferrer" class="floating-share-button linkedin" title="Share on LinkedIn"><svg viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853.0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601.0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144.0-2.063-.926-2.063-2.065.0-1.138.92-2.063 2.063-2.063 1.14.0 2.064.925 2.064 2.063.0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225.0H1.771C.792.0.0.774.0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2.0 22.222.0h.003z"/></svg>
</a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F" target=_blank rel="noopener noreferrer" class="floating-share-button facebook" title="Share on Facebook"><svg viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312.0 2.686.235 2.686.235v2.953H15.83c-1.491.0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
</a><a href="https://reddit.com/submit?url=https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F&title=Building+Type-Safe+APIs+with+AWS+API+Gateway+and+TypeScript" target=_blank rel="noopener noreferrer" class="floating-share-button reddit" title="Share on Reddit"><svg viewBox="0 0 24 24"><path d="M12 0A12 12 0 000 12a12 12 0 0012 12 12 12 0 0012-12A12 12 0 0012 0zm5.01 4.744c.688.0 1.25.561 1.25 1.249a1.25 1.25.0 01-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968.0 1.754.786 1.754 1.754.0.716-.435 1.333-1.01 1.614a3.111 3.111.0 01.042.52c0 2.694-3.13 4.87-7.004 4.87s-7.004-2.176-7.004-4.87c0-.183.015-.366.043-.534A1.748 1.748.0 014.028 12c0-.968.786-1.754 1.754-1.754.463.0.898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342.0 01.14-.197.35.35.0 01.238-.042l2.906.617a1.214 1.214.0 011.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687.0 1.248-.561 1.248-1.249S9.937 12 9.249 12zm5.5.0c-.687.0-1.248.561-1.248 1.25.0.687.561 1.248 1.249 1.248S16 13.937 16 13.249c0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327.0 00-.231.094.33.33.0 000 .463c.842.842 2.484.913 2.961.913s2.105-.056 2.961-.913a.361.361.0 00.029-.463.33.33.0 00-.464.0c-.547.533-1.684.73-2.512.73-.828.0-1.979-.196-2.512-.73a.326.326.0 00-.232-.095z"/></svg>
</a><a href="https://news.ycombinator.com/submitlink?u=https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F&t=Building+Type-Safe+APIs+with+AWS+API+Gateway+and+TypeScript" target=_blank rel="noopener noreferrer" class="floating-share-button hackernews" title="Share on Hacker News"><svg viewBox="0 0 24 24"><path d="M0 24V0h24v24H0zM6.951 5.896l4.112 7.708v5.064h1.583v-4.972l4.148-7.799h-1.749l-2.457 4.875c-.372.745-.688 1.434-.688 1.434s-.297-.708-.651-1.434L8.831 5.896h-1.88z"/></svg>
</a><a href="https://wa.me/?text=Building+Type-Safe+APIs+with+AWS+API+Gateway+and+TypeScript+https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F" target=_blank rel="noopener noreferrer" class="floating-share-button whatsapp" title="Share on WhatsApp"><svg viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198.0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479.0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87.0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86.0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64.0 5.122 1.03 6.988 2.898a9.825 9.825.0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815.0 0012.05.0C5.495.0.16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882.0 005.683 1.448h.005c6.554.0 11.89-5.335 11.893-11.893A11.821 11.821.0 0020.465 3.488"/></svg>
</a><a href="mailto:?subject=Building+Type-Safe+APIs+with+AWS+API+Gateway+and+TypeScript&body=Check+out+this+article%3A+Building+Type-Safe+APIs+with+AWS+API+Gateway+and+TypeScript+-+https%3A%2F%2Fscottobert.com%2Fposts%2Faws-api-gateway-typescript%2F" class="floating-share-button email" title="Share via Email"><svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1.0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1.0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"/></svg>
</a><button type=button class="floating-share-button copy-link" data-url=https://scottobert.com/posts/aws-api-gateway-typescript/ title="Copy link">
<svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1.0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1.0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1.0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg></button></div></div><script>(function(){const s=document.getElementById("floating-share"),t=document.getElementById("share-toggle"),n=document.getElementById("share-buttons");if(!s||!t||!n)return;let e=!1,o;t.addEventListener("click",function(){e=!e,e?(n.classList.add("visible"),t.classList.add("active"),clearTimeout(o)):(n.classList.remove("visible"),t.classList.remove("active"))});function i(){clearTimeout(o),o=setTimeout(()=>{e&&(n.classList.remove("visible"),t.classList.remove("active"),e=!1)},5e3)}s.addEventListener("mouseenter",()=>{clearTimeout(o)}),s.addEventListener("mouseleave",()=>{e&&i()}),t.addEventListener("click",()=>{e&&i()});let l=0;const d=300;window.addEventListener("scroll",function(){const o=window.pageYOffset||document.documentElement.scrollTop;o>d?s.classList.add("visible"):(s.classList.remove("visible"),e&&(n.classList.remove("visible"),t.classList.remove("active"),e=!1)),l=o});const a=n.querySelector(".copy-link");a&&a.addEventListener("click",function(){const e=this.getAttribute("data-url");navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(e).then(()=>{c(this)}).catch(()=>{r(e,this)}):r(e,this)});function r(e,t){const n=document.createElement("textarea");n.value=e,n.style.position="fixed",n.style.left="-999999px",n.style.top="-999999px",document.body.appendChild(n),n.focus(),n.select();try{document.execCommand("copy"),c(t)}catch(e){console.error("Fallback: Unable to copy",e)}document.body.removeChild(n)}function c(e){e.classList.add("copied"),setTimeout(()=>{e.classList.remove("copied")},2e3)}})()</script></main><aside class=blog-sidebar><div class=sidebar-widget><h3>Recent Posts</h3><ul class=recent-posts><li><a href=/posts/lambda-to-lambda-vs-sns-chaining/>Lambda-to-Lambda Calls vs. SNS Chaining in AWS: When and How to Use Each</a>
<span class=post-date>Jun 19, 2025</span></li><li><a href=/posts/advanced-cloudformation-patterns/>Infrastructure as Code: Advanced CloudFormation Patterns</a>
<span class=post-date>Jun 13, 2025</span></li><li><a href=/posts/reverting-git-commits-safely/>Reverting Git Commits Safely: Undoing Changes Without Losing History</a>
<span class=post-date>Jun 11, 2025</span></li><li><a href=/posts/dynamodb-streams-opensearch-sync/>Real-time Data Synchronization: Using DynamoDB Streams and Lambda to Keep OpenSearch Indexes Current</a>
<span class=post-date>Jun 6, 2025</span></li><li><a href=/posts/using-ai-in-software-engineering/>Harnessing AI in Software Engineering: Opportunities and Challenges</a>
<span class=post-date>May 29, 2025</span></li></ul></div><div class=sidebar-widget><h3>Post Series</h3><ul class=recent-posts><li><a href=/posts/lambda-to-lambda-vs-sns-chaining/>AWS and Typescript: Lambda-to-Lambda Calls vs. SNS Chaining in AWS: When and How to Use Each</a>
<span class=post-date>Jun 19, 2025</span><div class=series-meta><a href=/series/aws-and-typescript/ class=series-link>View all 8 posts in series →</a></div></li><li><a href=/posts/real-time-processing-architectures/>Cloud Architecture Patterns: Real-time Processing Architectures</a>
<span class=post-date>Apr 11, 2021</span><div class=series-meta><a href=/series/cloud-architecture-patterns/ class=series-link>View all 7 posts in series →</a></div></li><li><a href=/posts/technical-debt-management-growing-codebases/>Modern Development Practices: Technical Debt Management in Growing Codebases: Strategies for Sustainable Development</a>
<span class=post-date>Dec 19, 2021</span><div class=series-meta><a href=/series/modern-development-practices/ class=series-link>View all 7 posts in series →</a></div></li><li><a href=/posts/threat-modeling-cloud-applications/>Security in Cloud-Native Applications: Threat Modeling for Cloud Applications: A Comprehensive Approach to Security Design</a>
<span class=post-date>Oct 19, 2019</span><div class=series-meta><a href=/series/security-in-cloud-native-applications/ class=series-link>View all 7 posts in series →</a></div></li></ul></div><div class=sidebar-widget><h3>Categories</h3><ul class=categories><li><a href=/categories/api-development>api development (2)</a></li><li><a href=/categories/architecture>architecture (2)</a></li><li><a href=/categories/architecture-and-design>architecture and design (10)</a></li><li><a href=/categories/artificial-intelligence>artificial intelligence (1)</a></li><li><a href=/categories/cloud-computing>cloud computing (22)</a></li><li><a href=/categories/code-quality>code quality (1)</a></li><li><a href=/categories/compliance>compliance (1)</a></li><li><a href=/categories/cost-optimization>cost optimization (1)</a></li><li><a href=/categories/data-engineering>data engineering (3)</a></li><li><a href=/categories/database>database (1)</a></li><li><a href=/categories/database-design>database design (1)</a></li><li><a href=/categories/debugging-and-troubleshooting>debugging and troubleshooting (1)</a></li><li><a href=/categories/developer-experience>developer experience (1)</a></li><li><a href=/categories/development-tools>development tools (3)</a></li><li><a href=/categories/development-tutorials>development tutorials (1)</a></li><li><a href=/categories/infrastructure-as-code>infrastructure as code (1)</a></li><li><a href=/categories/microservices>microservices (1)</a></li><li><a href=/categories/performance>performance (1)</a></li><li><a href=/categories/quality-assurance>quality assurance (1)</a></li><li><a href=/categories/real-time-applications>real-time applications (1)</a></li><li><a href=/categories/security>security (8)</a></li><li><a href=/categories/serverless>serverless (2)</a></li><li><a href=/categories/software-development>software development (8)</a></li><li><a href=/categories/technical-debt>technical debt (1)</a></li><li><a href=/categories/testing>testing (2)</a></li><li><a href=/categories/version-control>version control (2)</a></li></ul></div><div class=sidebar-widget><h3>Tags</h3><div class=tag-cloud><a href=/tags/ai class=tag-cloud-item style=font-size:1rem>ai
</a><a href=/tags/api-design class=tag-cloud-item style=font-size:1rem>api design
</a><a href=/tags/api-gateway class=tag-cloud-item style=font-size:1rem>api gateway
</a><a href=/tags/api-security class=tag-cloud-item style=font-size:1rem>api security
</a><a href=/tags/architecture class=tag-cloud-item style=font-size:2rem>architecture
</a><a href=/tags/athena class=tag-cloud-item style=font-size:1rem>athena
</a><a href=/tags/authentication class=tag-cloud-item style=font-size:1rem>authentication
</a><a href=/tags/authorization class=tag-cloud-item style=font-size:1rem>authorization
</a><a href=/tags/automation class=tag-cloud-item style=font-size:1rem>automation
</a><a href=/tags/aws class=tag-cloud-item style=font-size:3rem>aws
</a><a href=/tags/aws-lambda class=tag-cloud-item style=font-size:1rem>aws lambda
</a><a href=/tags/best-practices class=tag-cloud-item style=font-size:2rem>best practices
</a><a href=/tags/cdk class=tag-cloud-item style=font-size:1rem>cdk
</a><a href=/tags/chaos-engineering class=tag-cloud-item style=font-size:1rem>chaos engineering
</a><a href=/tags/ci/cd class=tag-cloud-item style=font-size:1rem>ci/cd
</a><a href=/tags/cloud-native class=tag-cloud-item style=font-size:1rem>cloud native
</a><a href=/tags/cloudformation class=tag-cloud-item style=font-size:1rem>cloudformation
</a><a href=/tags/cloudnative class=tag-cloud-item style=font-size:1rem>cloudnative
</a><a href=/tags/code-quality class=tag-cloud-item style=font-size:1rem>code quality
</a><a href=/tags/communication-patterns class=tag-cloud-item style=font-size:1rem>communication patterns
</a><a href=/tags/compliance class=tag-cloud-item style=font-size:1rem>compliance
</a><a href=/tags/containers class=tag-cloud-item style=font-size:1rem>containers
</a><a href=/tags/cost-optimization class=tag-cloud-item style=font-size:1rem>cost optimization
</a><a href=/tags/cqrs class=tag-cloud-item style=font-size:1rem>cqrs
</a><a href=/tags/data-architecture class=tag-cloud-item style=font-size:1rem>data architecture
</a><a href=/tags/data-lake class=tag-cloud-item style=font-size:1rem>data lake
</a><a href=/tags/data-modeling class=tag-cloud-item style=font-size:1rem>data modeling
</a><a href=/tags/database class=tag-cloud-item style=font-size:1rem>database
</a><a href=/tags/database-design class=tag-cloud-item style=font-size:1rem>database design
</a><a href=/tags/debugging class=tag-cloud-item style=font-size:1rem>debugging
</a><a href=/tags/debugging-and-troubleshooting class=tag-cloud-item style=font-size:1rem>debugging and troubleshooting
</a><a href=/tags/developer-tips class=tag-cloud-item style=font-size:1rem>developer tips
</a><a href=/tags/development class=tag-cloud-item style=font-size:2rem>development
</a><a href=/tags/devops class=tag-cloud-item style=font-size:1rem>devops
</a><a href=/tags/devsecops class=tag-cloud-item style=font-size:1rem>devsecops
</a><a href=/tags/distributed-systems class=tag-cloud-item style=font-size:1rem>distributed systems
</a><a href=/tags/docker class=tag-cloud-item style=font-size:1rem>docker
</a><a href=/tags/dynamodb class=tag-cloud-item style=font-size:1rem>dynamodb
</a><a href=/tags/encryption class=tag-cloud-item style=font-size:1rem>encryption
</a><a href=/tags/enterprise-architecture class=tag-cloud-item style=font-size:1rem>enterprise architecture
</a><a href=/tags/event-sourcing class=tag-cloud-item style=font-size:1rem>event sourcing
</a><a href=/tags/event-driven-architecture class=tag-cloud-item style=font-size:1rem>event-driven architecture
</a><a href=/tags/eventbridge class=tag-cloud-item style=font-size:1rem>eventbridge
</a><a href=/tags/fault-tolerance class=tag-cloud-item style=font-size:1rem>fault tolerance
</a><a href=/tags/gdpr class=tag-cloud-item style=font-size:1rem>gdpr
</a><a href=/tags/git class=tag-cloud-item style=font-size:1rem>git
</a><a href=/tags/glue class=tag-cloud-item style=font-size:1rem>glue
</a><a href=/tags/governance class=tag-cloud-item style=font-size:1rem>governance
</a><a href=/tags/graphql class=tag-cloud-item style=font-size:1rem>graphql
</a><a href=/tags/hipaa class=tag-cloud-item style=font-size:1rem>hipaa
</a><a href=/tags/iam class=tag-cloud-item style=font-size:1rem>iam
</a><a href=/tags/identity-management class=tag-cloud-item style=font-size:1rem>identity management
</a><a href=/tags/infrastructure class=tag-cloud-item style=font-size:1rem>infrastructure
</a><a href=/tags/infrastructure-as-code class=tag-cloud-item style=font-size:1rem>infrastructure as code
</a><a href=/tags/jwt class=tag-cloud-item style=font-size:1rem>jwt
</a><a href=/tags/kinesis class=tag-cloud-item style=font-size:1rem>kinesis
</a><a href=/tags/kubernetes class=tag-cloud-item style=font-size:1rem>kubernetes
</a><a href=/tags/lambda class=tag-cloud-item style=font-size:1rem>lambda
</a><a href=/tags/load-testing class=tag-cloud-item style=font-size:1rem>load testing
</a><a href=/tags/metrics class=tag-cloud-item style=font-size:1rem>metrics
</a><a href=/tags/microservices class=tag-cloud-item style=font-size:1rem>microservices
</a><a href=/tags/monitoring class=tag-cloud-item style=font-size:1rem>monitoring
</a><a href=/tags/multi-account class=tag-cloud-item style=font-size:1rem>multi-account
</a><a href=/tags/nosql class=tag-cloud-item style=font-size:1rem>nosql
</a><a href=/tags/oauth class=tag-cloud-item style=font-size:1rem>oauth
</a><a href=/tags/octave class=tag-cloud-item style=font-size:1rem>octave
</a><a href=/tags/opensearch class=tag-cloud-item style=font-size:1rem>opensearch
</a><a href=/tags/pasta class=tag-cloud-item style=font-size:1rem>pasta
</a><a href=/tags/patterns class=tag-cloud-item style=font-size:1rem>patterns
</a><a href=/tags/pci-dss class=tag-cloud-item style=font-size:1rem>pci-dss
</a><a href=/tags/performance-testing class=tag-cloud-item style=font-size:1rem>performance testing
</a><a href=/tags/productivity class=tag-cloud-item style=font-size:1rem>productivity
</a><a href=/tags/rate-limiting class=tag-cloud-item style=font-size:1rem>rate limiting
</a><a href=/tags/real-time class=tag-cloud-item style=font-size:1rem>real-time
</a><a href=/tags/refactoring class=tag-cloud-item style=font-size:1rem>refactoring
</a><a href=/tags/reliability class=tag-cloud-item style=font-size:1rem>reliability
</a><a href=/tags/resilience class=tag-cloud-item style=font-size:1rem>resilience
</a><a href=/tags/rest class=tag-cloud-item style=font-size:1rem>rest
</a><a href=/tags/rest-api class=tag-cloud-item style=font-size:1rem>rest api
</a><a href=/tags/riskassessment class=tag-cloud-item style=font-size:1rem>riskassessment
</a><a href=/tags/s3 class=tag-cloud-item style=font-size:1rem>s3
</a><a href=/tags/search class=tag-cloud-item style=font-size:1rem>search
</a><a href=/tags/secrets-management class=tag-cloud-item style=font-size:1rem>secrets management
</a><a href=/tags/security class=tag-cloud-item style=font-size:2rem>security
</a><a href=/tags/securitydesign class=tag-cloud-item style=font-size:1rem>securitydesign
</a><a href=/tags/serverless class=tag-cloud-item style=font-size:2rem>serverless
</a><a href=/tags/soc2 class=tag-cloud-item style=font-size:1rem>soc2
</a><a href=/tags/software-engineering class=tag-cloud-item style=font-size:1rem>software engineering
</a><a href=/tags/standards class=tag-cloud-item style=font-size:1rem>standards
</a><a href=/tags/stream-processing class=tag-cloud-item style=font-size:1rem>stream processing
</a><a href=/tags/streams class=tag-cloud-item style=font-size:1rem>streams
</a><a href=/tags/stride class=tag-cloud-item style=font-size:1rem>stride
</a><a href=/tags/tdd class=tag-cloud-item style=font-size:1rem>tdd
</a><a href=/tags/technical-debt class=tag-cloud-item style=font-size:1rem>technical debt
</a><a href=/tags/testing class=tag-cloud-item style=font-size:1rem>testing
</a><a href=/tags/threatmodeling class=tag-cloud-item style=font-size:1rem>threatmodeling
</a><a href=/tags/typescript class=tag-cloud-item style=font-size:3rem>typescript
</a><a href=/tags/version-control class=tag-cloud-item style=font-size:1rem>version control
</a><a href=/tags/websockets class=tag-cloud-item style=font-size:1rem>websockets
</a><a href=/tags/zero-trust class=tag-cloud-item style=font-size:1rem>zero trust</a></div></div><div class=sidebar-widget><h3>Subscribe</h3><div class=subscribe-links><a href=/index.xml class=rss-link><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg>
RSS Feed</a></div></div><div class="sidebar-widget npm-packages"><h3>My NPM Packages</h3><div id=npm-list></div></div></aside></div></div><footer class=site-footer><div class=container><p>&copy; 2025 Scott Obert</p></div></footer></body></html>
<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Scott Obert</title><link rel=stylesheet href=/css/style.css><script src=/js/npm-packages.js defer></script></head><body><header><div class=container><h1><a href=/>Scott Obert</a></h1><nav><a href=/posts/>Blog</a></nav></div></header><main class=container><article class=post><h1>How to deploy an AWS Lambda function written in TypeScript using SAM CLI</h1><div class=post-meta><span>Feb 17, 2023</span>
<span>| Tags: Development, AWS, Serverless, TypeScript</span></div><div class=post-content><p>Welcome to the world of AWS Serverless! In this blog post, we will be discussing how to deploy an AWS Lambda function written in TypeScript using the AWS SAM CLI.</p><p>AWS Lambda is a compute service that allows you to run your code in response to events or triggers, such as changes to data in an S3 bucket, or updates to a DynamoDB table. AWS Serverless Application Model (SAM) is an open-source framework for building serverless applications. The SAM CLI provides a local development and testing environment for AWS Serverless applications.</p><h2 id=prerequisites>Prerequisites</h2><p>Before we dive into the instructions, let&rsquo;s make sure we have the prerequisites installed:</p><ul><li>Node.js (v10.x or later)</li><li>AWS CLI (v2.x or later)</li><li>SAM CLI (v1.x or later)</li><li>TypeScript (v3.x or later)</li><li>An AWS account with appropriate permissions</li></ul><h2 id=instructions>Instructions</h2><p>Now, let&rsquo;s get started:</p><ol><li>Create a new TypeScript project</li></ol><p>Create a new directory for your project and navigate to that directory in your terminal. Run the following command to create a new TypeScript project:</p><p><code>$ tsc --init</code></p><p>This will create a <code>tsconfig.json</code> file that TypeScript will use to compile your code.</p><ol start=2><li>Install necessary dependencies</li></ol><p>We will be using the <code>aws-sdk</code> and <code>aws-lambda</code> modules in our Lambda function. Run the following command to install the necessary dependencies:</p><p><code>$ npm install --save aws-sdk aws-lambda</code></p><ol start=3><li>Write your Lambda function code</li></ol><p>Create a new file in your project directory called <code>handler.ts</code> and write your Lambda function code. For example, let&rsquo;s create a simple function that returns the current date and time:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>APIGatewayProxyEvent</span>, <span style=color:#a6e22e>APIGatewayProxyResult</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;aws-lambda&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handler</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>event</span>: <span style=color:#66d9ef>APIGatewayProxyEvent</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>APIGatewayProxyResult</span>&gt; <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>statusCode</span>: <span style=color:#66d9ef>200</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>body</span>: <span style=color:#66d9ef>JSON.stringify</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`Hello from AWS Lambda! The current time is </span><span style=color:#e6db74>${</span><span style=color:#66d9ef>new</span> Date().<span style=color:#a6e22e>toTimeString</span>()<span style=color:#e6db74>}</span><span style=color:#e6db74>.`</span>,
</span></span><span style=display:flex><span>    }),
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><ol start=4><li>Define your SAM template</li></ol><p>Create a new file in your project directory called template.yaml and define your SAM template. Here is an example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>AWSTemplateFormatVersion</span>: <span style=color:#e6db74>&#39;2010-09-09&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>Transform</span>: <span style=color:#ae81ff>AWS::Serverless-2016-10-31</span>
</span></span><span style=display:flex><span><span style=color:#f92672>Resources</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>MyFunction</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>AWS::Serverless::Function</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>Handler</span>: <span style=color:#ae81ff>dist/handler.handler</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>Runtime</span>: <span style=color:#ae81ff>nodejs14.x</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>CodeUri</span>: <span style=color:#ae81ff>./</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>MemorySize</span>: <span style=color:#ae81ff>128</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>Timeout</span>: <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>Events</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>GetEvent</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>Api</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>Path</span>: <span style=color:#ae81ff>/my-function</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>Method</span>: <span style=color:#ae81ff>get</span>
</span></span></code></pre></div><p>This template defines a new AWS Lambda function with a memory size of 128MB and a timeout of 10 seconds. The function is triggered by an HTTP GET request to the /my-function endpoint.</p><ol start=5><li>Build and package your TypeScript code</li></ol><p>Run the following command to build your TypeScript code: <code>$ npm run build</code></p><p>This will compile your TypeScript code into JavaScript and output it to a new dist directory.</p><p>Run the following command to package your code into a ZIP file: <code>$ sam package --template-file template.yaml --output-template-file packaged.yaml --s3-bucket your-s3-bucket</code></p><p>This will create a new packaged.yaml file that contains your AWS SAM template and a ZIP file with your compiled code.</p></div></article></main><footer><div class=container><p>&copy; 2025 Scott Obert. Powered by Hugo.</p></div></footer></body></html>